{"version":3,"file":"cozy-src.js","sources":["../src/core/Util.js","../src/core/Class.js","../src/core/Events.js","../src/core/Browser.js","../src/geometry/Point.js","../src/dom/DomEvent.Pointer.js","../src/dom/DomEvent.DoubleTap.js","../src/dom/DomEvent.js","../src/dom/DomUtil.js","../src/reader/Reader.js","../src/control/Control.js","../src/control/Control.Paging.js","../src/control/Control.Contents.js","../src/control/Control.Title.js","../src/control/Control.PublicationMetadata.js","../src/control/Control.Preferences.js","../src/control/Control.Widget.js","../src/control/index.js","../src/core/Bus.js","../src/core/index.js","../src/epubjs.js","../src/reader/Reader.EpubJS.js","../src/reader/index.js","../src/cozy.js"],"sourcesContent":["/*\n * @namespace Util\n *\n * Various utility functions, used by Leaflet internally.\n */\n\n// @function extend(dest: Object, src?: Object): Object\n// Merges the properties of the `src` object (or multiple objects) into `dest` object and returns the latter. Has an `L.extend` shortcut.\nexport function extend(dest) {\n    var i, j, len, src;\n\n    for (j = 1, len = arguments.length; j < len; j++) {\n        src = arguments[j];\n        for (i in src) {\n            dest[i] = src[i];\n        }\n    }\n    return dest;\n}\n\n// @function create(proto: Object, properties?: Object): Object\n// Compatibility polyfill for [Object.create](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/create)\nexport var create = Object.create || (function () {\n    function F() {}\n    return function (proto) {\n        F.prototype = proto;\n        return new F();\n    };\n})();\n\n// @function bind(fn: Function, …): Function\n// Returns a new function bound to the arguments passed, like [Function.prototype.bind](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\n// Has a `L.bind()` shortcut.\nexport function bind(fn, obj) {\n    var slice = Array.prototype.slice;\n\n    if (fn.bind) {\n        return fn.bind.apply(fn, slice.call(arguments, 1));\n    }\n\n    var args = slice.call(arguments, 2);\n\n    return function () {\n        return fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);\n    };\n}\n\n// @property lastId: Number\n// Last unique ID used by [`stamp()`](#util-stamp)\nexport var lastId = 0;\n\n// @function stamp(obj: Object): Number\n// Returns the unique ID of an object, assiging it one if it doesn't have it.\nexport function stamp(obj) {\n    /*eslint-disable */\n    obj._cozy_id = obj._cozy_id || ++lastId;\n    return obj._cozy_id; /* not leaflet */\n    /*eslint-enable */\n}\n\n// @function throttle(fn: Function, time: Number, context: Object): Function\n// Returns a function which executes function `fn` with the given scope `context`\n// (so that the `this` keyword refers to `context` inside `fn`'s code). The function\n// `fn` will be called no more than one time per given amount of `time`. The arguments\n// received by the bound function will be any arguments passed when binding the\n// function, followed by any arguments passed when invoking the bound function.\n// Has an `L.throttle` shortcut.\nexport function throttle(fn, time, context) {\n    var lock, args, wrapperFn, later;\n\n    later = function () {\n        // reset lock and call if queued\n        lock = false;\n        if (args) {\n            wrapperFn.apply(context, args);\n            args = false;\n        }\n    };\n\n    wrapperFn = function () {\n        if (lock) {\n            // called too soon, queue to call later\n            args = arguments;\n\n        } else {\n            // call and lock until later\n            fn.apply(context, arguments);\n            setTimeout(later, time);\n            lock = true;\n        }\n    };\n\n    return wrapperFn;\n}\n\n// @function wrapNum(num: Number, range: Number[], includeMax?: Boolean): Number\n// Returns the number `num` modulo `range` in such a way so it lies within\n// `range[0]` and `range[1]`. The returned value will be always smaller than\n// `range[1]` unless `includeMax` is set to `true`.\nexport function wrapNum(x, range, includeMax) {\n    var max = range[1],\n        min = range[0],\n        d = max - min;\n    return x === max && includeMax ? x : ((x - min) % d + d) % d + min;\n}\n\n// @function falseFn(): Function\n// Returns a function which always returns `false`.\nexport function falseFn() { return false; }\n\n// @function formatNum(num: Number, digits?: Number): Number\n// Returns the number `num` rounded to `digits` decimals, or to 5 decimals by default.\nexport function formatNum(num, digits) {\n    var pow = Math.pow(10, digits || 5);\n    return Math.round(num * pow) / pow;\n}\n\n// @function trim(str: String): String\n// Compatibility polyfill for [String.prototype.trim](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)\nexport function trim(str) {\n    return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n}\n\n// @function splitWords(str: String): String[]\n// Trims and splits the string on whitespace and returns the array of parts.\nexport function splitWords(str) {\n    return trim(str).split(/\\s+/);\n}\n\n// @function setOptions(obj: Object, options: Object): Object\n// Merges the given properties to the `options` of the `obj` object, returning the resulting options. See `Class options`. Has an `L.setOptions` shortcut.\nexport function setOptions(obj, options) {\n    if (!obj.hasOwnProperty('options')) {\n        obj.options = obj.options ? create(obj.options) : {};\n    }\n    for (var i in options) {\n        obj.options[i] = options[i];\n    }\n    return obj.options;\n}\n\n// @function getParamString(obj: Object, existingUrl?: String, uppercase?: Boolean): String\n// Converts an object into a parameter URL string, e.g. `{a: \"foo\", b: \"bar\"}`\n// translates to `'?a=foo&b=bar'`. If `existingUrl` is set, the parameters will\n// be appended at the end. If `uppercase` is `true`, the parameter names will\n// be uppercased (e.g. `'?A=foo&B=bar'`)\nexport function getParamString(obj, existingUrl, uppercase) {\n    var params = [];\n    for (var i in obj) {\n        params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\n    }\n    return ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');\n}\n\nvar templateRe = /\\{ *([\\w_\\-]+) *\\}/g;\n\n// @function template(str: String, data: Object): String\n// Simple templating facility, accepts a template string of the form `'Hello {a}, {b}'`\n// and a data object like `{a: 'foo', b: 'bar'}`, returns evaluated string\n// `('Hello foo, bar')`. You can also specify functions instead of strings for\n// data values — they will be evaluated passing `data` as an argument.\nexport function template(str, data) {\n    return str.replace(templateRe, function (str, key) {\n        var value = data[key];\n\n        if (value === undefined) {\n            throw new Error('No value provided for variable ' + str);\n\n        } else if (typeof value === 'function') {\n            value = value(data);\n        }\n        return value;\n    });\n}\n\n// @function isArray(obj): Boolean\n// Compatibility polyfill for [Array.isArray](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray)\nexport var isArray = Array.isArray || function (obj) {\n    return (Object.prototype.toString.call(obj) === '[object Array]');\n};\n\n// @function indexOf(array: Array, el: Object): Number\n// Compatibility polyfill for [Array.prototype.indexOf](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)\nexport function indexOf(array, el) {\n    for (var i = 0; i < array.length; i++) {\n        if (array[i] === el) { return i; }\n    }\n    return -1;\n}\n\n// @property emptyImageUrl: String\n// Data URI string containing a base64-encoded empty GIF image.\n// Used as a hack to free memory from unused images on WebKit-powered\n// mobile devices (by setting image `src` to this string).\nexport var emptyImageUrl = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';\n\n// inspired by http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n\nfunction getPrefixed(name) {\n    return window['webkit' + name] || window['moz' + name] || window['ms' + name];\n}\n\nvar lastTime = 0;\n\n// fallback for IE 7-8\nfunction timeoutDefer(fn) {\n    var time = +new Date(),\n        timeToCall = Math.max(0, 16 - (time - lastTime));\n\n    lastTime = time + timeToCall;\n    return window.setTimeout(fn, timeToCall);\n}\n\nexport var requestFn = window.requestAnimationFrame || getPrefixed('RequestAnimationFrame') || timeoutDefer;\nexport var cancelFn = window.cancelAnimationFrame || getPrefixed('CancelAnimationFrame') ||\n        getPrefixed('CancelRequestAnimationFrame') || function (id) { window.clearTimeout(id); };\n\n// @function requestAnimFrame(fn: Function, context?: Object, immediate?: Boolean): Number\n// Schedules `fn` to be executed when the browser repaints. `fn` is bound to\n// `context` if given. When `immediate` is set, `fn` is called immediately if\n// the browser doesn't have native support for\n// [`window.requestAnimationFrame`](https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame),\n// otherwise it's delayed. Returns a request ID that can be used to cancel the request.\nexport function requestAnimFrame(fn, context, immediate) {\n    if (immediate && requestFn === timeoutDefer) {\n        fn.call(context);\n    } else {\n        return requestFn.call(window, bind(fn, context));\n    }\n}\n\n// @function cancelAnimFrame(id: Number): undefined\n// Cancels a previous `requestAnimFrame`. See also [window.cancelAnimationFrame](https://developer.mozilla.org/docs/Web/API/window/cancelAnimationFrame).\nexport function cancelAnimFrame(id) {\n    if (id) {\n        cancelFn.call(window, id);\n    }\n}\n","import * as Util from './Util';\r\n\r\n// @class Class\r\n// @aka L.Class\r\n\r\n// @section\r\n// @uninheritable\r\n\r\n// Thanks to John Resig and Dean Edwards for inspiration!\r\n\r\nexport function Class() {}\r\n\r\nClass.extend = function (props) {\r\n\r\n\t// @function extend(props: Object): Function\r\n\t// [Extends the current class](#class-inheritance) given the properties to be included.\r\n\t// Returns a Javascript function that is a class constructor (to be called with `new`).\r\n\tvar NewClass = function () {\r\n\r\n\t\t// call the constructor\r\n\t\tif (this.initialize) {\r\n\t\t\tthis.initialize.apply(this, arguments);\r\n\t\t}\r\n\r\n\t\t// call all constructor hooks\r\n\t\tthis.callInitHooks();\r\n\t};\r\n\r\n\tvar parentProto = NewClass.__super__ = this.prototype;\r\n\r\n\tvar proto = Util.create(parentProto);\r\n\tproto.constructor = NewClass;\r\n\r\n\tNewClass.prototype = proto;\r\n\r\n\t// inherit parent's statics\r\n\tfor (var i in this) {\r\n\t\tif (this.hasOwnProperty(i) && i !== 'prototype') {\r\n\t\t\tNewClass[i] = this[i];\r\n\t\t}\r\n\t}\r\n\r\n\t// mix static properties into the class\r\n\tif (props.statics) {\r\n\t\tUtil.extend(NewClass, props.statics);\r\n\t\tdelete props.statics;\r\n\t}\r\n\r\n\t// mix includes into the prototype\r\n\tif (props.includes) {\r\n\t\tcheckDeprecatedMixinEvents(props.includes);\r\n\t\tUtil.extend.apply(null, [proto].concat(props.includes));\r\n\t\tdelete props.includes;\r\n\t}\r\n\r\n\t// merge options\r\n\tif (proto.options) {\r\n\t\tprops.options = Util.extend(Util.create(proto.options), props.options);\r\n\t}\r\n\r\n\t// mix given properties into the prototype\r\n\tUtil.extend(proto, props);\r\n\t\r\n\tproto._initHooks = [];\r\n\r\n\t// add method for calling all hooks\r\n\tproto.callInitHooks = function () {\r\n\r\n\t\tif (this._initHooksCalled) { return; }\r\n\r\n\t\tif (parentProto.callInitHooks) {\r\n\t\t\tparentProto.callInitHooks.call(this);\r\n\t\t}\r\n\r\n\t\tthis._initHooksCalled = true;\r\n\r\n\t\tfor (var i = 0, len = proto._initHooks.length; i < len; i++) {\r\n\t\t\tproto._initHooks[i].call(this);\r\n\t\t}\r\n\t};\r\n\r\n\treturn NewClass;\r\n};\r\n\r\n\r\n// @function include(properties: Object): this\r\n// [Includes a mixin](#class-includes) into the current class.\r\nClass.include = function (props) {\r\n\tUtil.extend(this.prototype, props);\r\n\treturn this;\r\n};\r\n\r\n// @function mergeOptions(options: Object): this\r\n// [Merges `options`](#class-options) into the defaults of the class.\r\nClass.mergeOptions = function (options) {\r\n\tUtil.extend(this.prototype.options, options);\r\n\treturn this;\r\n};\r\n\r\n// @function addInitHook(fn: Function): this\r\n// Adds a [constructor hook](#class-constructor-hooks) to the class.\r\nClass.addInitHook = function (fn) { // (Function) || (String, args...)\r\n\tvar args = Array.prototype.slice.call(arguments, 1);\r\n\r\n\tvar init = typeof fn === 'function' ? fn : function () {\r\n\t\tthis[fn].apply(this, args);\r\n\t};\r\n\r\n\tthis.prototype._initHooks = this.prototype._initHooks || [];\r\n\tthis.prototype._initHooks.push(init);\r\n\treturn this;\r\n};\r\n\r\nfunction checkDeprecatedMixinEvents(includes) {\r\n\tif (!cozy || !cozy.Mixin) { return; }\r\n\r\n\tincludes = cozy.Util.isArray(includes) ? includes : [includes];\r\n\r\n\tfor (var i = 0; i < includes.length; i++) {\r\n\t\tif (includes[i] === cozy.Mixin.Events) {\r\n\t\t\tconsole.warn('Deprecated include of cozy.Mixin.Events: ' +\r\n\t\t\t\t'this property will be removed in future releases, ' +\r\n\t\t\t\t'please inherit from cozy.Evented instead.', new Error().stack);\r\n\t\t}\r\n\t}\r\n}\r\n","import {Class} from './Class';\r\nimport * as Util from './Util';\r\n\r\n/*\r\n * @class Evented\r\n * @aka L.Evented\r\n * @inherits Class\r\n *\r\n * A set of methods shared between event-powered classes (like `Map` and `Marker`). Generally, events allow you to execute some function when something happens with an object (e.g. the user clicks on the map, causing the map to fire `'click'` event).\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * map.on('click', function(e) {\r\n * \talert(e.latlng);\r\n * } );\r\n * ```\r\n *\r\n * Leaflet deals with event listeners by reference, so if you want to add a listener and then remove it, define it as a function:\r\n *\r\n * ```js\r\n * function onClick(e) { ... }\r\n *\r\n * map.on('click', onClick);\r\n * map.off('click', onClick);\r\n * ```\r\n */\r\n\r\nexport var Evented = Class.extend({\r\n\r\n\t/* @method on(type: String, fn: Function, context?: Object): this\r\n\t * Adds a listener function (`fn`) to a particular event type of the object. You can optionally specify the context of the listener (object the this keyword will point to). You can also pass several space-separated types (e.g. `'click dblclick'`).\r\n\t *\r\n\t * @alternative\r\n\t * @method on(eventMap: Object): this\r\n\t * Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\n\t */\r\n\ton: function (types, fn, context) {\r\n\r\n\t\t// types can be a map of types/handlers\r\n\t\tif (typeof types === 'object') {\r\n\t\t\tfor (var type in types) {\r\n\t\t\t\t// we don't process space-separated events here for performance;\r\n\t\t\t\t// it's a hot path since Layer uses the on(obj) syntax\r\n\t\t\t\tthis._on(type, types[type], fn);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\t// types can be a string of space-separated words\r\n\t\t\ttypes = Util.splitWords(types);\r\n\r\n\t\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\t\tthis._on(types[i], fn, context);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/* @method off(type: String, fn?: Function, context?: Object): this\r\n\t * Removes a previously added listener function. If no function is specified, it will remove all the listeners of that particular event from the object. Note that if you passed a custom context to `on`, you must pass the same context to `off` in order to remove the listener.\r\n\t *\r\n\t * @alternative\r\n\t * @method off(eventMap: Object): this\r\n\t * Removes a set of type/listener pairs.\r\n\t *\r\n\t * @alternative\r\n\t * @method off: this\r\n\t * Removes all listeners to all events on the object.\r\n\t */\r\n\toff: function (types, fn, context) {\r\n\r\n\t\tif (!types) {\r\n\t\t\t// clear all listeners if called without arguments\r\n\t\t\tdelete this._events;\r\n\r\n\t\t} else if (typeof types === 'object') {\r\n\t\t\tfor (var type in types) {\r\n\t\t\t\tthis._off(type, types[type], fn);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\ttypes = Util.splitWords(types);\r\n\r\n\t\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\t\tthis._off(types[i], fn, context);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// attach listener (without syntactic sugar now)\r\n\t_on: function (type, fn, context) {\r\n\t\tthis._events = this._events || {};\r\n\r\n\t\t/* get/init listeners for type */\r\n\t\tvar typeListeners = this._events[type];\r\n\t\tif (!typeListeners) {\r\n\t\t\ttypeListeners = [];\r\n\t\t\tthis._events[type] = typeListeners;\r\n\t\t}\r\n\r\n\t\tif (context === this) {\r\n\t\t\t// Less memory footprint.\r\n\t\t\tcontext = undefined;\r\n\t\t}\r\n\t\tvar newListener = {fn: fn, ctx: context},\r\n\t\t    listeners = typeListeners;\r\n\r\n\t\t// check if fn already there\r\n\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\tif (listeners[i].fn === fn && listeners[i].ctx === context) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlisteners.push(newListener);\r\n\t},\r\n\r\n\t_off: function (type, fn, context) {\r\n\t\tvar listeners,\r\n\t\t    i,\r\n\t\t    len;\r\n\r\n\t\tif (!this._events) { return; }\r\n\r\n\t\tlisteners = this._events[type];\r\n\r\n\t\tif (!listeners) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!fn) {\r\n\t\t\t// Set all removed listeners to noop so they are not called if remove happens in fire\r\n\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\tlisteners[i].fn = Util.falseFn;\r\n\t\t\t}\r\n\t\t\t// clear all listeners for a type if function isn't specified\r\n\t\t\tdelete this._events[type];\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (context === this) {\r\n\t\t\tcontext = undefined;\r\n\t\t}\r\n\r\n\t\tif (listeners) {\r\n\r\n\t\t\t// find fn and remove it\r\n\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\tvar l = listeners[i];\r\n\t\t\t\tif (l.ctx !== context) { continue; }\r\n\t\t\t\tif (l.fn === fn) {\r\n\r\n\t\t\t\t\t// set the removed listener to noop so that's not called if remove happens in fire\r\n\t\t\t\t\tl.fn = Util.falseFn;\r\n\r\n\t\t\t\t\tif (this._firingCount) {\r\n\t\t\t\t\t\t/* copy array in case events are being fired */\r\n\t\t\t\t\t\tthis._events[type] = listeners = listeners.slice();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlisteners.splice(i, 1);\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// @method fire(type: String, data?: Object, propagate?: Boolean): this\r\n\t// Fires an event of the specified type. You can optionally provide an data\r\n\t// object — the first argument of the listener function will contain its\r\n\t// properties. The event can optionally be propagated to event parents.\r\n\tfire: function (type, data, propagate) {\r\n\t\tif (!this.listens(type, propagate)) { return this; }\r\n\r\n\t\tvar event = Util.extend({}, data, {type: type, target: this});\r\n\r\n\t\tif (this._events) {\r\n\t\t\tvar listeners = this._events[type];\r\n\r\n\t\t\tif (listeners) {\r\n\t\t\t\tthis._firingCount = (this._firingCount + 1) || 1;\r\n\t\t\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\t\tvar l = listeners[i];\r\n\t\t\t\t\tl.fn.call(l.ctx || this, event);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._firingCount--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (propagate) {\r\n\t\t\t// propagate the event to parents (set with addEventParent)\r\n\t\t\tthis._propagateEvent(event);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method listens(type: String): Boolean\r\n\t// Returns `true` if a particular event type has any listeners attached to it.\r\n\tlistens: function (type, propagate) {\r\n\t\tvar listeners = this._events && this._events[type];\r\n\t\tif (listeners && listeners.length) { return true; }\r\n\r\n\t\tif (propagate) {\r\n\t\t\t// also check parents for listeners if event propagates\r\n\t\t\tfor (var id in this._eventParents) {\r\n\t\t\t\tif (this._eventParents[id].listens(type, propagate)) { return true; }\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t// @method once(…): this\r\n\t// Behaves as [`on(…)`](#evented-on), except the listener will only get fired once and then removed.\r\n\tonce: function (types, fn, context) {\r\n\r\n\t\tif (typeof types === 'object') {\r\n\t\t\tfor (var type in types) {\r\n\t\t\t\tthis.once(type, types[type], fn);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar handler = Util.bind(function () {\r\n\t\t\tthis\r\n\t\t\t    .off(types, fn, context)\r\n\t\t\t    .off(types, handler, context);\r\n\t\t}, this);\r\n\r\n\t\t// add a listener that's executed once and removed after that\r\n\t\treturn this\r\n\t\t    .on(types, fn, context)\r\n\t\t    .on(types, handler, context);\r\n\t},\r\n\r\n\t// @method addEventParent(obj: Evented): this\r\n\t// Adds an event parent - an `Evented` that will receive propagated events\r\n\taddEventParent: function (obj) {\r\n\t\tthis._eventParents = this._eventParents || {};\r\n\t\tthis._eventParents[Util.stamp(obj)] = obj;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method removeEventParent(obj: Evented): this\r\n\t// Removes an event parent, so it will stop receiving propagated events\r\n\tremoveEventParent: function (obj) {\r\n\t\tif (this._eventParents) {\r\n\t\t\tdelete this._eventParents[Util.stamp(obj)];\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_propagateEvent: function (e) {\r\n\t\tfor (var id in this._eventParents) {\r\n\t\t\tthis._eventParents[id].fire(e.type, Util.extend({layer: e.target}, e), true);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar proto = Evented.prototype;\r\n\r\n// aliases; we should ditch those eventually\r\n\r\n// @method addEventListener(…): this\r\n// Alias to [`on(…)`](#evented-on)\r\nproto.addEventListener = proto.on;\r\n\r\n// @method removeEventListener(…): this\r\n// Alias to [`off(…)`](#evented-off)\r\n\r\n// @method clearAllEventListeners(…): this\r\n// Alias to [`off()`](#evented-off)\r\nproto.removeEventListener = proto.clearAllEventListeners = proto.off;\r\n\r\n// @method addOneTimeEventListener(…): this\r\n// Alias to [`once(…)`](#evented-once)\r\nproto.addOneTimeEventListener = proto.once;\r\n\r\n// @method fireEvent(…): this\r\n// Alias to [`fire(…)`](#evented-fire)\r\nproto.fireEvent = proto.fire;\r\n\r\n// @method hasEventListeners(…): Boolean\r\n// Alias to [`listens(…)`](#evented-listens)\r\nproto.hasEventListeners = proto.listens;\r\n","\n/*\n * @namespace Browser\n * @aka L.Browser\n *\n * A namespace with static properties for browser/feature detection used by Leaflet internally.\n *\n * @example\n *\n * ```js\n * if (L.Browser.ielt9) {\n *   alert('Upgrade your browser, dude!');\n * }\n * ```\n */\n\nvar style = document.documentElement.style;\n\n// @property ie: Boolean; `true` for all Internet Explorer versions (not Edge).\nexport var ie = 'ActiveXObject' in window;\n\n// @property ielt9: Boolean; `true` for Internet Explorer versions less than 9.\nexport var ielt9 = ie && !document.addEventListener;\n\n// @property edge: Boolean; `true` for the Edge web browser.\nexport var edge = 'msLaunchUri' in navigator && !('documentMode' in document);\n\n// @property webkit: Boolean;\n// `true` for webkit-based browsers like Chrome and Safari (including mobile versions).\nexport var webkit = userAgentContains('webkit');\n\n// @property android: Boolean\n// `true` for any browser running on an Android platform.\nexport var android = userAgentContains('android');\n\n// @property android23: Boolean; `true` for browsers running on Android 2 or Android 3.\nexport var android23 = userAgentContains('android 2') || userAgentContains('android 3');\n\n// @property opera: Boolean; `true` for the Opera browser\nexport var opera = !!window.opera;\n\n// @property chrome: Boolean; `true` for the Chrome browser.\nexport var chrome = userAgentContains('chrome');\n\n// @property gecko: Boolean; `true` for gecko-based browsers like Firefox.\nexport var gecko = userAgentContains('gecko') && !webkit && !opera && !ie;\n\n// @property safari: Boolean; `true` for the Safari browser.\nexport var safari = !chrome && userAgentContains('safari');\n\nexport var phantom = userAgentContains('phantom');\n\n// @property opera12: Boolean\n// `true` for the Opera browser supporting CSS transforms (version 12 or later).\nexport var opera12 = 'OTransition' in style;\n\n// @property win: Boolean; `true` when the browser is running in a Windows platform\nexport var win = navigator.platform.indexOf('Win') === 0;\n\n// @property ie3d: Boolean; `true` for all Internet Explorer versions supporting CSS transforms.\nexport var ie3d = ie && ('transition' in style);\n\n// @property webkit3d: Boolean; `true` for webkit-based browsers supporting CSS transforms.\nexport var webkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23;\n\n// @property gecko3d: Boolean; `true` for gecko-based browsers supporting CSS transforms.\nexport var gecko3d = 'MozPerspective' in style;\n\n// @property any3d: Boolean\n// `true` for all browsers supporting CSS transforms.\nexport var any3d = !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d) && !opera12 && !phantom;\n\n// @property mobile: Boolean; `true` for all browsers running in a mobile device.\nexport var mobile = typeof orientation !== 'undefined' || userAgentContains('mobile');\n\n// @property mobileWebkit: Boolean; `true` for all webkit-based browsers in a mobile device.\nexport var mobileWebkit = mobile && webkit;\n\n// @property mobileWebkit3d: Boolean\n// `true` for all webkit-based browsers in a mobile device supporting CSS transforms.\nexport var mobileWebkit3d = mobile && webkit3d;\n\n// @property msPointer: Boolean\n// `true` for browsers implementing the Microsoft touch events model (notably IE10).\nexport var msPointer = !window.PointerEvent && window.MSPointerEvent;\n\n// @property pointer: Boolean\n// `true` for all browsers supporting [pointer events](https://msdn.microsoft.com/en-us/library/dn433244%28v=vs.85%29.aspx).\nexport var pointer = !!(window.PointerEvent || msPointer);\n\n// @property touch: Boolean\n// `true` for all browsers supporting [touch events](https://developer.mozilla.org/docs/Web/API/Touch_events).\n// This does not necessarily mean that the browser is running in a computer with\n// a touchscreen, it only means that the browser is capable of understanding\n// touch events.\nexport var touch = !window.L_NO_TOUCH && (pointer || 'ontouchstart' in window ||\n        (window.DocumentTouch && document instanceof window.DocumentTouch));\n\n// @property mobileOpera: Boolean; `true` for the Opera browser in a mobile device.\nexport var mobileOpera = mobile && opera;\n\n// @property mobileGecko: Boolean\n// `true` for gecko-based browsers running in a mobile device.\nexport var mobileGecko = mobile && gecko;\n\n// @property retina: Boolean\n// `true` for browsers on a high-resolution \"retina\" screen.\nexport var retina = (window.devicePixelRatio || (window.screen.deviceXDPI / window.screen.logicalXDPI)) > 1;\n\n\n// @property canvas: Boolean\n// `true` when the browser supports [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).\nexport var canvas = (function () {\n    return !!document.createElement('canvas').getContext;\n}());\n\n// @property svg: Boolean\n// `true` when the browser supports [SVG](https://developer.mozilla.org/docs/Web/SVG).\n// export var svg = !!(document.createElementNS && svgCreate('svg').createSVGRect);\nexport var svg = true;\n\n// @property vml: Boolean\n// `true` if the browser supports [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language).\nexport var vml = !svg && (function () {\n    try {\n        var div = document.createElement('div');\n        div.innerHTML = '<v:shape adj=\"1\"/>';\n\n        var shape = div.firstChild;\n        shape.style.behavior = 'url(#default#VML)';\n\n        return shape && (typeof shape.adj === 'object');\n\n    } catch (e) {\n        return false;\n    }\n}());\n\n\nfunction userAgentContains(str) {\n    return navigator.userAgent.toLowerCase().indexOf(str) >= 0;\n}\n","import {isArray, formatNum} from '../core/Util';\r\n\r\n/*\r\n * @class Point\r\n * @aka L.Point\r\n *\r\n * Represents a point with `x` and `y` coordinates in pixels.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var point = L.point(200, 300);\r\n * ```\r\n *\r\n * All Leaflet methods and options that accept `Point` objects also accept them in a simple Array form (unless noted otherwise), so these lines are equivalent:\r\n *\r\n * ```js\r\n * map.panBy([200, 300]);\r\n * map.panBy(L.point(200, 300));\r\n * ```\r\n */\r\n\r\nexport function Point(x, y, round) {\r\n\t// @property x: Number; The `x` coordinate of the point\r\n\tthis.x = (round ? Math.round(x) : x);\r\n\t// @property y: Number; The `y` coordinate of the point\r\n\tthis.y = (round ? Math.round(y) : y);\r\n}\r\n\r\nPoint.prototype = {\r\n\r\n\t// @method clone(): Point\r\n\t// Returns a copy of the current point.\r\n\tclone: function () {\r\n\t\treturn new Point(this.x, this.y);\r\n\t},\r\n\r\n\t// @method add(otherPoint: Point): Point\r\n\t// Returns the result of addition of the current and the given points.\r\n\tadd: function (point) {\r\n\t\t// non-destructive, returns a new point\r\n\t\treturn this.clone()._add(toPoint(point));\r\n\t},\r\n\r\n\t_add: function (point) {\r\n\t\t// destructive, used directly for performance in situations where it's safe to modify existing point\r\n\t\tthis.x += point.x;\r\n\t\tthis.y += point.y;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method subtract(otherPoint: Point): Point\r\n\t// Returns the result of subtraction of the given point from the current.\r\n\tsubtract: function (point) {\r\n\t\treturn this.clone()._subtract(toPoint(point));\r\n\t},\r\n\r\n\t_subtract: function (point) {\r\n\t\tthis.x -= point.x;\r\n\t\tthis.y -= point.y;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method divideBy(num: Number): Point\r\n\t// Returns the result of division of the current point by the given number.\r\n\tdivideBy: function (num) {\r\n\t\treturn this.clone()._divideBy(num);\r\n\t},\r\n\r\n\t_divideBy: function (num) {\r\n\t\tthis.x /= num;\r\n\t\tthis.y /= num;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method multiplyBy(num: Number): Point\r\n\t// Returns the result of multiplication of the current point by the given number.\r\n\tmultiplyBy: function (num) {\r\n\t\treturn this.clone()._multiplyBy(num);\r\n\t},\r\n\r\n\t_multiplyBy: function (num) {\r\n\t\tthis.x *= num;\r\n\t\tthis.y *= num;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method scaleBy(scale: Point): Point\r\n\t// Multiply each coordinate of the current point by each coordinate of\r\n\t// `scale`. In linear algebra terms, multiply the point by the\r\n\t// [scaling matrix](https://en.wikipedia.org/wiki/Scaling_%28geometry%29#Matrix_representation)\r\n\t// defined by `scale`.\r\n\tscaleBy: function (point) {\r\n\t\treturn new Point(this.x * point.x, this.y * point.y);\r\n\t},\r\n\r\n\t// @method unscaleBy(scale: Point): Point\r\n\t// Inverse of `scaleBy`. Divide each coordinate of the current point by\r\n\t// each coordinate of `scale`.\r\n\tunscaleBy: function (point) {\r\n\t\treturn new Point(this.x / point.x, this.y / point.y);\r\n\t},\r\n\r\n\t// @method round(): Point\r\n\t// Returns a copy of the current point with rounded coordinates.\r\n\tround: function () {\r\n\t\treturn this.clone()._round();\r\n\t},\r\n\r\n\t_round: function () {\r\n\t\tthis.x = Math.round(this.x);\r\n\t\tthis.y = Math.round(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method floor(): Point\r\n\t// Returns a copy of the current point with floored coordinates (rounded down).\r\n\tfloor: function () {\r\n\t\treturn this.clone()._floor();\r\n\t},\r\n\r\n\t_floor: function () {\r\n\t\tthis.x = Math.floor(this.x);\r\n\t\tthis.y = Math.floor(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method ceil(): Point\r\n\t// Returns a copy of the current point with ceiled coordinates (rounded up).\r\n\tceil: function () {\r\n\t\treturn this.clone()._ceil();\r\n\t},\r\n\r\n\t_ceil: function () {\r\n\t\tthis.x = Math.ceil(this.x);\r\n\t\tthis.y = Math.ceil(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method distanceTo(otherPoint: Point): Number\r\n\t// Returns the cartesian distance between the current and the given points.\r\n\tdistanceTo: function (point) {\r\n\t\tpoint = toPoint(point);\r\n\r\n\t\tvar x = point.x - this.x,\r\n\t\t    y = point.y - this.y;\r\n\r\n\t\treturn Math.sqrt(x * x + y * y);\r\n\t},\r\n\r\n\t// @method equals(otherPoint: Point): Boolean\r\n\t// Returns `true` if the given point has the same coordinates.\r\n\tequals: function (point) {\r\n\t\tpoint = toPoint(point);\r\n\r\n\t\treturn point.x === this.x &&\r\n\t\t       point.y === this.y;\r\n\t},\r\n\r\n\t// @method contains(otherPoint: Point): Boolean\r\n\t// Returns `true` if both coordinates of the given point are less than the corresponding current point coordinates (in absolute values).\r\n\tcontains: function (point) {\r\n\t\tpoint = toPoint(point);\r\n\r\n\t\treturn Math.abs(point.x) <= Math.abs(this.x) &&\r\n\t\t       Math.abs(point.y) <= Math.abs(this.y);\r\n\t},\r\n\r\n\t// @method toString(): String\r\n\t// Returns a string representation of the point for debugging purposes.\r\n\ttoString: function () {\r\n\t\treturn 'Point(' +\r\n\t\t        formatNum(this.x) + ', ' +\r\n\t\t        formatNum(this.y) + ')';\r\n\t}\r\n};\r\n\r\n// @factory L.point(x: Number, y: Number, round?: Boolean)\r\n// Creates a Point object with the given `x` and `y` coordinates. If optional `round` is set to true, rounds the `x` and `y` values.\r\n\r\n// @alternative\r\n// @factory L.point(coords: Number[])\r\n// Expects an array of the form `[x, y]` instead.\r\n\r\n// @alternative\r\n// @factory L.point(coords: Object)\r\n// Expects a plain object of the form `{x: Number, y: Number}` instead.\r\nexport function toPoint(x, y, round) {\r\n\tif (x instanceof Point) {\r\n\t\treturn x;\r\n\t}\r\n\tif (isArray(x)) {\r\n\t\treturn new Point(x[0], x[1]);\r\n\t}\r\n\tif (x === undefined || x === null) {\r\n\t\treturn x;\r\n\t}\r\n\tif (typeof x === 'object' && 'x' in x && 'y' in x) {\r\n\t\treturn new Point(x.x, x.y);\r\n\t}\r\n\treturn new Point(x, y, round);\r\n}\r\n","import * as DomEvent from './DomEvent';\nimport * as Util from '../core/Util';\nimport * as Browser from '../core/Browser';\n\n/*\n * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.\n */\n\n\nvar POINTER_DOWN =   Browser.msPointer ? 'MSPointerDown'   : 'pointerdown',\n    POINTER_MOVE =   Browser.msPointer ? 'MSPointerMove'   : 'pointermove',\n    POINTER_UP =     Browser.msPointer ? 'MSPointerUp'     : 'pointerup',\n    POINTER_CANCEL = Browser.msPointer ? 'MSPointerCancel' : 'pointercancel',\n    TAG_WHITE_LIST = ['INPUT', 'SELECT', 'OPTION'],\n\n    _pointers = {},\n    _pointerDocListener = false;\n\n// DomEvent.DoubleTap needs to know about this\nexport var _pointersCount = 0;\n\n// Provides a touch events wrapper for (ms)pointer events.\n// ref http://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890\n\nexport function addPointerListener(obj, type, handler, id) {\n\tif (type === 'touchstart') {\n\t\t_addPointerStart(obj, handler, id);\n\n\t} else if (type === 'touchmove') {\n\t\t_addPointerMove(obj, handler, id);\n\n\t} else if (type === 'touchend') {\n\t\t_addPointerEnd(obj, handler, id);\n\t}\n\n\treturn this;\n}\n\nexport function removePointerListener(obj, type, id) {\n\tvar handler = obj['_leaflet_' + type + id];\n\n\tif (type === 'touchstart') {\n\t\tobj.removeEventListener(POINTER_DOWN, handler, false);\n\n\t} else if (type === 'touchmove') {\n\t\tobj.removeEventListener(POINTER_MOVE, handler, false);\n\n\t} else if (type === 'touchend') {\n\t\tobj.removeEventListener(POINTER_UP, handler, false);\n\t\tobj.removeEventListener(POINTER_CANCEL, handler, false);\n\t}\n\n\treturn this;\n}\n\nfunction _addPointerStart(obj, handler, id) {\n\tvar onDown = Util.bind(function (e) {\n\t\tif (e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {\n\t\t\t// In IE11, some touch events needs to fire for form controls, or\n\t\t\t// the controls will stop working. We keep a whitelist of tag names that\n\t\t\t// need these events. For other target tags, we prevent default on the event.\n\t\t\tif (TAG_WHITE_LIST.indexOf(e.target.tagName) < 0) {\n\t\t\t\tDomEvent.preventDefault(e);\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t_handlePointer(e, handler);\n\t});\n\n\tobj['_leaflet_touchstart' + id] = onDown;\n\tobj.addEventListener(POINTER_DOWN, onDown, false);\n\n\t// need to keep track of what pointers and how many are active to provide e.touches emulation\n\tif (!_pointerDocListener) {\n\t\t// we listen documentElement as any drags that end by moving the touch off the screen get fired there\n\t\tdocument.documentElement.addEventListener(POINTER_DOWN, _globalPointerDown, true);\n\t\tdocument.documentElement.addEventListener(POINTER_MOVE, _globalPointerMove, true);\n\t\tdocument.documentElement.addEventListener(POINTER_UP, _globalPointerUp, true);\n\t\tdocument.documentElement.addEventListener(POINTER_CANCEL, _globalPointerUp, true);\n\n\t\t_pointerDocListener = true;\n\t}\n}\n\nfunction _globalPointerDown(e) {\n\t_pointers[e.pointerId] = e;\n\t_pointersCount++;\n}\n\nfunction _globalPointerMove(e) {\n\tif (_pointers[e.pointerId]) {\n\t\t_pointers[e.pointerId] = e;\n\t}\n}\n\nfunction _globalPointerUp(e) {\n\tdelete _pointers[e.pointerId];\n\t_pointersCount--;\n}\n\nfunction _handlePointer(e, handler) {\n\te.touches = [];\n\tfor (var i in _pointers) {\n\t\te.touches.push(_pointers[i]);\n\t}\n\te.changedTouches = [e];\n\n\thandler(e);\n}\n\nfunction _addPointerMove(obj, handler, id) {\n\tvar onMove = function (e) {\n\t\t// don't fire touch moves when mouse isn't down\n\t\tif ((e.pointerType === e.MSPOINTER_TYPE_MOUSE || e.pointerType === 'mouse') && e.buttons === 0) { return; }\n\n\t\t_handlePointer(e, handler);\n\t};\n\n\tobj['_leaflet_touchmove' + id] = onMove;\n\tobj.addEventListener(POINTER_MOVE, onMove, false);\n}\n\nfunction _addPointerEnd(obj, handler, id) {\n\tvar onUp = function (e) {\n\t\t_handlePointer(e, handler);\n\t};\n\n\tobj['_leaflet_touchend' + id] = onUp;\n\tobj.addEventListener(POINTER_UP, onUp, false);\n\tobj.addEventListener(POINTER_CANCEL, onUp, false);\n}\n\n","import * as Browser from '../core/Browser';\r\nimport {_pointersCount} from './DomEvent.Pointer';\r\n\r\n/*\r\n * Extends the event handling code with double tap support for mobile browsers.\r\n */\r\n\r\nvar _touchstart = Browser.msPointer ? 'MSPointerDown' : Browser.pointer ? 'pointerdown' : 'touchstart',\r\n    _touchend = Browser.msPointer ? 'MSPointerUp' : Browser.pointer ? 'pointerup' : 'touchend',\r\n    _pre = '_leaflet_';\r\n\r\n// inspired by Zepto touch code by Thomas Fuchs\r\nexport function addDoubleTapListener(obj, handler, id) {\r\n\tvar last, touch,\r\n\t    doubleTap = false,\r\n\t    delay = 250;\r\n\r\n\tfunction onTouchStart(e) {\r\n\t\tvar count;\r\n\r\n\t\tif (Browser.pointer) {\r\n\t\t\tif ((!Browser.edge) || e.pointerType === 'mouse') { return; }\r\n\t\t\tcount = _pointersCount;\r\n\t\t} else {\r\n\t\t\tcount = e.touches.length;\r\n\t\t}\r\n\r\n\t\tif (count > 1) { return; }\r\n\r\n\t\tvar now = Date.now(),\r\n\t\t    delta = now - (last || now);\r\n\r\n\t\ttouch = e.touches ? e.touches[0] : e;\r\n\t\tdoubleTap = (delta > 0 && delta <= delay);\r\n\t\tlast = now;\r\n\t}\r\n\r\n\tfunction onTouchEnd(e) {\r\n\t\tif (doubleTap && !touch.cancelBubble) {\r\n\t\t\tif (Browser.pointer) {\r\n\t\t\t\tif ((!Browser.edge) || e.pointerType === 'mouse') { return; }\r\n\t\t\t\t// work around .type being readonly with MSPointer* events\r\n\t\t\t\tvar newTouch = {},\r\n\t\t\t\t    prop, i;\r\n\r\n\t\t\t\tfor (i in touch) {\r\n\t\t\t\t\tprop = touch[i];\r\n\t\t\t\t\tnewTouch[i] = prop && prop.bind ? prop.bind(touch) : prop;\r\n\t\t\t\t}\r\n\t\t\t\ttouch = newTouch;\r\n\t\t\t}\r\n\t\t\ttouch.type = 'dblclick';\r\n\t\t\thandler(touch);\r\n\t\t\tlast = null;\r\n\t\t}\r\n\t}\r\n\r\n\tobj[_pre + _touchstart + id] = onTouchStart;\r\n\tobj[_pre + _touchend + id] = onTouchEnd;\r\n\tobj[_pre + 'dblclick' + id] = handler;\r\n\r\n\tobj.addEventListener(_touchstart, onTouchStart, false);\r\n\tobj.addEventListener(_touchend, onTouchEnd, false);\r\n\r\n\t// On some platforms (notably, chrome<55 on win10 + touchscreen + mouse),\r\n\t// the browser doesn't fire touchend/pointerup events but does fire\r\n\t// native dblclicks. See #4127.\r\n\t// Edge 14 also fires native dblclicks, but only for pointerType mouse, see #5180.\r\n\tobj.addEventListener('dblclick', handler, false);\r\n\r\n\treturn this;\r\n}\r\n\r\nexport function removeDoubleTapListener(obj, id) {\r\n\tvar touchstart = obj[_pre + _touchstart + id],\r\n\t    touchend = obj[_pre + _touchend + id],\r\n\t    dblclick = obj[_pre + 'dblclick' + id];\r\n\r\n\tobj.removeEventListener(_touchstart, touchstart, false);\r\n\tobj.removeEventListener(_touchend, touchend, false);\r\n\tif (!Browser.edge) {\r\n\t\tobj.removeEventListener('dblclick', dblclick, false);\r\n\t}\r\n\r\n\treturn this;\r\n}\r\n","import {Point} from '../geometry/Point';\r\nimport * as Util from '../core/Util';\r\nimport * as Browser from '../core/Browser';\r\nimport {addPointerListener, removePointerListener} from './DomEvent.Pointer';\r\nimport {addDoubleTapListener, removeDoubleTapListener} from './DomEvent.DoubleTap';\r\n\r\n/*\r\n * @namespace DomEvent\r\n * Utility functions to work with the [DOM events](https://developer.mozilla.org/docs/Web/API/Event), used by Leaflet internally.\r\n */\r\n\r\n// Inspired by John Resig, Dean Edwards and YUI addEvent implementations.\r\n\r\n// @function on(el: HTMLElement, types: String, fn: Function, context?: Object): this\r\n// Adds a listener function (`fn`) to a particular DOM event type of the\r\n// element `el`. You can optionally specify the context of the listener\r\n// (object the `this` keyword will point to). You can also pass several\r\n// space-separated types (e.g. `'click dblclick'`).\r\n\r\n// @alternative\r\n// @function on(el: HTMLElement, eventMap: Object, context?: Object): this\r\n// Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\nexport function on(obj, types, fn, context) {\r\n\r\n\tif (typeof types === 'object') {\r\n\t\tfor (var type in types) {\r\n\t\t\taddOne(obj, type, types[type], fn);\r\n\t\t}\r\n\t} else {\r\n\t\ttypes = Util.splitWords(types);\r\n\r\n\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\taddOne(obj, types[i], fn, context);\r\n\t\t}\r\n\t}\r\n\r\n\treturn this;\r\n}\r\n\r\nvar eventsKey = '_leaflet_events';\r\n\r\n// @function off(el: HTMLElement, types: String, fn: Function, context?: Object): this\r\n// Removes a previously added listener function. If no function is specified,\r\n// it will remove all the listeners of that particular DOM event from the element.\r\n// Note that if you passed a custom context to on, you must pass the same\r\n// context to `off` in order to remove the listener.\r\n\r\n// @alternative\r\n// @function off(el: HTMLElement, eventMap: Object, context?: Object): this\r\n// Removes a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\n\r\n// @alternative\r\n// @function off(el: HTMLElement): this\r\n// Removes all known event listeners\r\nexport function off(obj, types, fn, context) {\r\n\r\n\tif (typeof types === 'object') {\r\n\t\tfor (var type in types) {\r\n\t\t\tremoveOne(obj, type, types[type], fn);\r\n\t\t}\r\n\t} else if (types) {\r\n\t\ttypes = Util.splitWords(types);\r\n\r\n\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\tremoveOne(obj, types[i], fn, context);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (var j in obj[eventsKey]) {\r\n\t\t\tremoveOne(obj, j, obj[eventsKey][j]);\r\n\t\t}\r\n\t\tdelete obj[eventsKey];\r\n\t}\r\n}\r\n\r\nfunction addOne(obj, type, fn, context) {\r\n\tvar id = type + Util.stamp(fn) + (context ? '_' + Util.stamp(context) : '');\r\n\r\n\tif (obj[eventsKey] && obj[eventsKey][id]) { return this; }\r\n\r\n\tvar handler = function (e) {\r\n\t\treturn fn.call(context || obj, e || window.event);\r\n\t};\r\n\r\n\tvar originalHandler = handler;\r\n\r\n\tif (Browser.pointer && type.indexOf('touch') === 0) {\r\n\t\t// Needs DomEvent.Pointer.js\r\n\t\taddPointerListener(obj, type, handler, id);\r\n\r\n\t} else if (Browser.touch && (type === 'dblclick') && addDoubleTapListener &&\r\n\t           !(Browser.pointer && Browser.chrome)) {\r\n\t\t// Chrome >55 does not need the synthetic dblclicks from addDoubleTapListener\r\n\t\t// See #5180\r\n\t\taddDoubleTapListener(obj, handler, id);\r\n\r\n\t} else if ('addEventListener' in obj) {\r\n\r\n\t\tif (type === 'mousewheel') {\r\n\t\t\tobj.addEventListener('onwheel' in obj ? 'wheel' : 'mousewheel', handler, false);\r\n\r\n\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {\r\n\t\t\thandler = function (e) {\r\n\t\t\t\te = e || window.event;\r\n\t\t\t\tif (isExternalTarget(obj, e)) {\r\n\t\t\t\t\toriginalHandler(e);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tobj.addEventListener(type === 'mouseenter' ? 'mouseover' : 'mouseout', handler, false);\r\n\r\n\t\t} else {\r\n\t\t\tif (type === 'click' && Browser.android) {\r\n\t\t\t\thandler = function (e) {\r\n\t\t\t\t\tfilterClick(e, originalHandler);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tobj.addEventListener(type, handler, false);\r\n\t\t}\r\n\r\n\t} else if ('attachEvent' in obj) {\r\n\t\tobj.attachEvent('on' + type, handler);\r\n\t}\r\n\r\n\tobj[eventsKey] = obj[eventsKey] || {};\r\n\tobj[eventsKey][id] = handler;\r\n}\r\n\r\nfunction removeOne(obj, type, fn, context) {\r\n\r\n\tvar id = type + Util.stamp(fn) + (context ? '_' + Util.stamp(context) : ''),\r\n\t    handler = obj[eventsKey] && obj[eventsKey][id];\r\n\r\n\tif (!handler) { return this; }\r\n\r\n\tif (Browser.pointer && type.indexOf('touch') === 0) {\r\n\t\tremovePointerListener(obj, type, id);\r\n\r\n\t} else if (Browser.touch && (type === 'dblclick') && removeDoubleTapListener) {\r\n\t\tremoveDoubleTapListener(obj, id);\r\n\r\n\t} else if ('removeEventListener' in obj) {\r\n\r\n\t\tif (type === 'mousewheel') {\r\n\t\t\tobj.removeEventListener('onwheel' in obj ? 'wheel' : 'mousewheel', handler, false);\r\n\r\n\t\t} else {\r\n\t\t\tobj.removeEventListener(\r\n\t\t\t\ttype === 'mouseenter' ? 'mouseover' :\r\n\t\t\t\ttype === 'mouseleave' ? 'mouseout' : type, handler, false);\r\n\t\t}\r\n\r\n\t} else if ('detachEvent' in obj) {\r\n\t\tobj.detachEvent('on' + type, handler);\r\n\t}\r\n\r\n\tobj[eventsKey][id] = null;\r\n}\r\n\r\n// @function stopPropagation(ev: DOMEvent): this\r\n// Stop the given event from propagation to parent elements. Used inside the listener functions:\r\n// ```js\r\n// L.DomEvent.on(div, 'click', function (ev) {\r\n// \tL.DomEvent.stopPropagation(ev);\r\n// });\r\n// ```\r\nexport function stopPropagation(e) {\r\n\r\n\tif (e.stopPropagation) {\r\n\t\te.stopPropagation();\r\n\t} else if (e.originalEvent) {  // In case of Leaflet event.\r\n\t\te.originalEvent._stopped = true;\r\n\t} else {\r\n\t\te.cancelBubble = true;\r\n\t}\r\n\tskipped(e);\r\n\r\n\treturn this;\r\n}\r\n\r\n// @function disableScrollPropagation(el: HTMLElement): this\r\n// Adds `stopPropagation` to the element's `'mousewheel'` events (plus browser variants).\r\nexport function disableScrollPropagation(el) {\r\n\treturn addOne(el, 'mousewheel', stopPropagation);\r\n}\r\n\r\n// @function disableClickPropagation(el: HTMLElement): this\r\n// Adds `stopPropagation` to the element's `'click'`, `'doubleclick'`,\r\n// `'mousedown'` and `'touchstart'` events (plus browser variants).\r\nexport function disableClickPropagation(el) {\r\n\ton(el, 'mousedown touchstart dblclick', stopPropagation);\r\n\taddOne(el, 'click', fakeStop);\r\n\treturn this;\r\n}\r\n\r\n// @function preventDefault(ev: DOMEvent): this\r\n// Prevents the default action of the DOM Event `ev` from happening (such as\r\n// following a link in the href of the a element, or doing a POST request\r\n// with page reload when a `<form>` is submitted).\r\n// Use it inside listener functions.\r\nexport function preventDefault(e) {\r\n\tif (e.preventDefault) {\r\n\t\te.preventDefault();\r\n\t} else {\r\n\t\te.returnValue = false;\r\n\t}\r\n\treturn this;\r\n}\r\n\r\n// @function stop(ev): this\r\n// Does `stopPropagation` and `preventDefault` at the same time.\r\nexport function stop(e) {\r\n\tpreventDefault(e);\r\n\tstopPropagation(e);\r\n\treturn this;\r\n}\r\n\r\n// @function getMousePosition(ev: DOMEvent, container?: HTMLElement): Point\r\n// Gets normalized mouse position from a DOM event relative to the\r\n// `container` or to the whole page if not specified.\r\nexport function getMousePosition(e, container) {\r\n\tif (!container) {\r\n\t\treturn new Point(e.clientX, e.clientY);\r\n\t}\r\n\r\n\tvar rect = container.getBoundingClientRect();\r\n\r\n\treturn new Point(\r\n\t\te.clientX - rect.left - container.clientLeft,\r\n\t\te.clientY - rect.top - container.clientTop);\r\n}\r\n\r\n// Chrome on Win scrolls double the pixels as in other platforms (see #4538),\r\n// and Firefox scrolls device pixels, not CSS pixels\r\nvar wheelPxFactor =\r\n\t(Browser.win && Browser.chrome) ? 2 :\r\n\tBrowser.gecko ? window.devicePixelRatio : 1;\r\n\r\n// @function getWheelDelta(ev: DOMEvent): Number\r\n// Gets normalized wheel delta from a mousewheel DOM event, in vertical\r\n// pixels scrolled (negative if scrolling down).\r\n// Events from pointing devices without precise scrolling are mapped to\r\n// a best guess of 60 pixels.\r\nexport function getWheelDelta(e) {\r\n\treturn (Browser.edge) ? e.wheelDeltaY / 2 : // Don't trust window-geometry-based delta\r\n\t       (e.deltaY && e.deltaMode === 0) ? -e.deltaY / wheelPxFactor : // Pixels\r\n\t       (e.deltaY && e.deltaMode === 1) ? -e.deltaY * 20 : // Lines\r\n\t       (e.deltaY && e.deltaMode === 2) ? -e.deltaY * 60 : // Pages\r\n\t       (e.deltaX || e.deltaZ) ? 0 :\t// Skip horizontal/depth wheel events\r\n\t       e.wheelDelta ? (e.wheelDeltaY || e.wheelDelta) / 2 : // Legacy IE pixels\r\n\t       (e.detail && Math.abs(e.detail) < 32765) ? -e.detail * 20 : // Legacy Moz lines\r\n\t       e.detail ? e.detail / -32765 * 60 : // Legacy Moz pages\r\n\t       0;\r\n}\r\n\r\nvar skipEvents = {};\r\n\r\nexport function fakeStop(e) {\r\n\t// fakes stopPropagation by setting a special event flag, checked/reset with skipped(e)\r\n\tskipEvents[e.type] = true;\r\n}\r\n\r\nexport function skipped(e) {\r\n\tvar events = skipEvents[e.type];\r\n\t// reset when checking, as it's only used in map container and propagates outside of the map\r\n\tskipEvents[e.type] = false;\r\n\treturn events;\r\n}\r\n\r\n// check if element really left/entered the event target (for mouseenter/mouseleave)\r\nexport function isExternalTarget(el, e) {\r\n\r\n\tvar related = e.relatedTarget;\r\n\r\n\tif (!related) { return true; }\r\n\r\n\ttry {\r\n\t\twhile (related && (related !== el)) {\r\n\t\t\trelated = related.parentNode;\r\n\t\t}\r\n\t} catch (err) {\r\n\t\treturn false;\r\n\t}\r\n\treturn (related !== el);\r\n}\r\n\r\nvar lastClick;\r\n\r\n// this is a horrible workaround for a bug in Android where a single touch triggers two click events\r\nfunction filterClick(e, handler) {\r\n\tvar timeStamp = (e.timeStamp || (e.originalEvent && e.originalEvent.timeStamp)),\r\n\t    elapsed = lastClick && (timeStamp - lastClick);\r\n\r\n\t// are they closer together than 500ms yet more than 100ms?\r\n\t// Android typically triggers them ~300ms apart while multiple listeners\r\n\t// on the same event should be triggered far faster;\r\n\t// or check if click is simulated on the element, and if it is, reject any non-simulated events\r\n\r\n\tif ((elapsed && elapsed > 100 && elapsed < 500) || (e.target._simulatedClick && !e._simulated)) {\r\n\t\tstop(e);\r\n\t\treturn;\r\n\t}\r\n\tlastClick = timeStamp;\r\n\r\n\thandler(e);\r\n}\r\n\r\n// @function addListener(…): this\r\n// Alias to [`L.DomEvent.on`](#domevent-on)\r\nexport {on as addListener};\r\n\r\n// @function removeListener(…): this\r\n// Alias to [`L.DomEvent.off`](#domevent-off)\r\nexport {off as removeListener};\r\n","import * as DomEvent from './DomEvent';\nimport * as Util from '../core/Util';\nimport {Point} from '../geometry/Point';\nimport * as Browser from '../core/Browser';\n\n/*\n * @namespace DomUtil\n *\n * Utility functions to work with the [DOM](https://developer.mozilla.org/docs/Web/API/Document_Object_Model)\n * tree, used by Leaflet internally.\n *\n * Most functions expecting or returning a `HTMLElement` also work for\n * SVG elements. The only difference is that classes refer to CSS classes\n * in HTML and SVG classes in SVG.\n */\n\n\n// @property TRANSFORM: String\n// Vendor-prefixed fransform style name (e.g. `'webkitTransform'` for WebKit).\nexport var TRANSFORM = testProp(\n    ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\n\n// webkitTransition comes first because some browser versions that drop vendor prefix don't do\n// the same for the transitionend event, in particular the Android 4.1 stock browser\n\n// @property TRANSITION: String\n// Vendor-prefixed transform style name.\nexport var TRANSITION = testProp(\n    ['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\n\nexport var TRANSITION_END =\n    TRANSITION === 'webkitTransition' || TRANSITION === 'OTransition' ? TRANSITION + 'End' : 'transitionend';\n\n\n// @function get(id: String|HTMLElement): HTMLElement\n// Returns an element given its DOM id, or returns the element itself\n// if it was passed directly.\nexport function get(id) {\n    return typeof id === 'string' ? document.getElementById(id) : id;\n}\n\n// @function getStyle(el: HTMLElement, styleAttrib: String): String\n// Returns the value for a certain style attribute on an element,\n// including computed values or values set through CSS.\nexport function getStyle(el, style) {\n    var value = el.style[style] || (el.currentStyle && el.currentStyle[style]);\n\n    if ((!value || value === 'auto') && document.defaultView) {\n        var css = document.defaultView.getComputedStyle(el, null);\n        value = css ? css[style] : null;\n    }\n    return value === 'auto' ? null : value;\n}\n\n// @function create(tagName: String, className?: String, container?: HTMLElement): HTMLElement\n// Creates an HTML element with `tagName`, sets its class to `className`, and optionally appends it to `container` element.\nexport function create(tagName, className, container) {\n    var el = document.createElement(tagName);\n    el.className = className || '';\n\n    if (container) {\n        container.appendChild(el);\n    }\n    return el;\n}\n\n// @function remove(el: HTMLElement)\n// Removes `el` from its parent element\nexport function remove(el) {\n    var parent = el.parentNode;\n    if (parent) {\n        parent.removeChild(el);\n    }\n}\n\n// @function empty(el: HTMLElement)\n// Removes all of `el`'s children elements from `el`\nexport function empty(el) {\n    while (el.firstChild) {\n        el.removeChild(el.firstChild);\n    }\n}\n\n// @function toFront(el: HTMLElement)\n// Makes `el` the last child of its parent, so it renders in front of the other children.\nexport function toFront(el) {\n    el.parentNode.appendChild(el);\n}\n\n// @function toBack(el: HTMLElement)\n// Makes `el` the first child of its parent, so it renders behind the other children.\nexport function toBack(el) {\n    var parent = el.parentNode;\n    parent.insertBefore(el, parent.firstChild);\n}\n\n// @function hasClass(el: HTMLElement, name: String): Boolean\n// Returns `true` if the element's class attribute contains `name`.\nexport function hasClass(el, name) {\n    if (el.classList !== undefined) {\n        return el.classList.contains(name);\n    }\n    var className = getClass(el);\n    return className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);\n}\n\n// @function addClass(el: HTMLElement, name: String)\n// Adds `name` to the element's class attribute.\nexport function addClass(el, name) {\n    if (el.classList !== undefined) {\n        var classes = Util.splitWords(name);\n        for (var i = 0, len = classes.length; i < len; i++) {\n            el.classList.add(classes[i]);\n        }\n    } else if (!hasClass(el, name)) {\n        var className = getClass(el);\n        setClass(el, (className ? className + ' ' : '') + name);\n    }\n}\n\n// @function removeClass(el: HTMLElement, name: String)\n// Removes `name` from the element's class attribute.\nexport function removeClass(el, name) {\n    if (el.classList !== undefined) {\n        el.classList.remove(name);\n    } else {\n        setClass(el, Util.trim((' ' + getClass(el) + ' ').replace(' ' + name + ' ', ' ')));\n    }\n}\n\n// @function setClass(el: HTMLElement, name: String)\n// Sets the element's class.\nexport function setClass(el, name) {\n    if (el.className.baseVal === undefined) {\n        el.className = name;\n    } else {\n        // in case of SVG element\n        el.className.baseVal = name;\n    }\n}\n\n// @function getClass(el: HTMLElement): String\n// Returns the element's class.\nexport function getClass(el) {\n    return el.className.baseVal === undefined ? el.className : el.className.baseVal;\n}\n\n// @function setOpacity(el: HTMLElement, opacity: Number)\n// Set the opacity of an element (including old IE support).\n// `opacity` must be a number from `0` to `1`.\nexport function setOpacity(el, value) {\n    if ('opacity' in el.style) {\n        el.style.opacity = value;\n    } else if ('filter' in el.style) {\n        _setOpacityIE(el, value);\n    }\n}\n\nfunction _setOpacityIE(el, value) {\n    var filter = false,\n        filterName = 'DXImageTransform.Microsoft.Alpha';\n\n    // filters collection throws an error if we try to retrieve a filter that doesn't exist\n    try {\n        filter = el.filters.item(filterName);\n    } catch (e) {\n        // don't set opacity to 1 if we haven't already set an opacity,\n        // it isn't needed and breaks transparent pngs.\n        if (value === 1) { return; }\n    }\n\n    value = Math.round(value * 100);\n\n    if (filter) {\n        filter.Enabled = (value !== 100);\n        filter.Opacity = value;\n    } else {\n        el.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';\n    }\n}\n\n// @function testProp(props: String[]): String|false\n// Goes through the array of style names and returns the first name\n// that is a valid style name for an element. If no such name is found,\n// it returns false. Useful for vendor-prefixed styles like `transform`.\nexport function testProp(props) {\n    var style = document.documentElement.style;\n\n    for (var i = 0; i < props.length; i++) {\n        if (props[i] in style) {\n            return props[i];\n        }\n    }\n    return false;\n}\n\n// @function setTransform(el: HTMLElement, offset: Point, scale?: Number)\n// Resets the 3D CSS transform of `el` so it is translated by `offset` pixels\n// and optionally scaled by `scale`. Does not have an effect if the\n// browser doesn't support 3D CSS transforms.\nexport function setTransform(el, offset, scale) {\n    var pos = offset || new Point(0, 0);\n\n    el.style[TRANSFORM] =\n        (Browser.ie3d ?\n            'translate(' + pos.x + 'px,' + pos.y + 'px)' :\n            'translate3d(' + pos.x + 'px,' + pos.y + 'px,0)') +\n        (scale ? ' scale(' + scale + ')' : '');\n}\n\n// @function setPosition(el: HTMLElement, position: Point)\n// Sets the position of `el` to coordinates specified by `position`,\n// using CSS translate or top/left positioning depending on the browser\n// (used by Leaflet internally to position its layers).\nexport function setPosition(el, point) {\n\n    /*eslint-disable */\n    el._leaflet_pos = point;\n    /*eslint-enable */\n\n    if (Browser.any3d) {\n        setTransform(el, point);\n    } else {\n        el.style.left = point.x + 'px';\n        el.style.top = point.y + 'px';\n    }\n}\n\n// @function getPosition(el: HTMLElement): Point\n// Returns the coordinates of an element previously positioned with setPosition.\nexport function getPosition(el) {\n    // this method is only used for elements previously positioned using setPosition,\n    // so it's safe to cache the position for performance\n\n    return el._leaflet_pos || new Point(0, 0);\n}\n\n// @function disableTextSelection()\n// Prevents the user from generating `selectstart` DOM events, usually generated\n// when the user drags the mouse through a page with text. Used internally\n// by Leaflet to override the behaviour of any click-and-drag interaction on\n// the map. Affects drag interactions on the whole document.\n\n// @function enableTextSelection()\n// Cancels the effects of a previous [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection).\nexport var disableTextSelection;\nexport var enableTextSelection;\nvar _userSelect;\nif ('onselectstart' in document) {\n    disableTextSelection = function () {\n        DomEvent.on(window, 'selectstart', DomEvent.preventDefault);\n    };\n    enableTextSelection = function () {\n        DomEvent.off(window, 'selectstart', DomEvent.preventDefault);\n    };\n} else {\n    var userSelectProperty = testProp(\n        ['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);\n\n    disableTextSelection = function () {\n        if (userSelectProperty) {\n            var style = document.documentElement.style;\n            _userSelect = style[userSelectProperty];\n            style[userSelectProperty] = 'none';\n        }\n    };\n    enableTextSelection = function () {\n        if (userSelectProperty) {\n            document.documentElement.style[userSelectProperty] = _userSelect;\n            _userSelect = undefined;\n        }\n    };\n}\n\n// @function disableImageDrag()\n// As [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection), but\n// for `dragstart` DOM events, usually generated when the user drags an image.\nexport function disableImageDrag() {\n    DomEvent.on(window, 'dragstart', DomEvent.preventDefault);\n}\n\n// @function enableImageDrag()\n// Cancels the effects of a previous [`L.DomUtil.disableImageDrag`](#domutil-disabletextselection).\nexport function enableImageDrag() {\n    DomEvent.off(window, 'dragstart', DomEvent.preventDefault);\n}\n\nvar _outlineElement, _outlineStyle;\n// @function preventOutline(el: HTMLElement)\n// Makes the [outline](https://developer.mozilla.org/docs/Web/CSS/outline)\n// of the element `el` invisible. Used internally by Leaflet to prevent\n// focusable elements from displaying an outline when the user performs a\n// drag interaction on them.\nexport function preventOutline(element) {\n    while (element.tabIndex === -1) {\n        element = element.parentNode;\n    }\n    if (!element || !element.style) { return; }\n    restoreOutline();\n    _outlineElement = element;\n    _outlineStyle = element.style.outline;\n    element.style.outline = 'none';\n    DomEvent.on(window, 'keydown', restoreOutline);\n}\n\n// @function restoreOutline()\n// Cancels the effects of a previous [`L.DomUtil.preventOutline`]().\nexport function restoreOutline() {\n    if (!_outlineElement) { return; }\n    _outlineElement.style.outline = _outlineStyle;\n    _outlineElement = undefined;\n    _outlineStyle = undefined;\n    DomEvent.off(window, 'keydown', restoreOutline);\n}\n","import * as Util from '../core/Util';\nimport {Evented} from '../core/Events';\n// import {Class} from '../core/Class';\nimport * as Browser from '../core/Browser';\nimport * as DomEvent from '../dom/DomEvent';\nimport * as DomUtil from '../dom/DomUtil';\n\n/*\n * @class Reader\n * @aka cozy.Map\n * @inherits Evented\n *\n * The central class of the API — it is used to create a book on a page and manipulate it.\n *\n * @example\n *\n * ```js\n * // initialize the map on the \"map\" div with a given center and zoom\n * var map = L.map('map', {\n *  center: [51.505, -0.09],\n *  zoom: 13\n * });\n * ```\n *\n */\n\nvar _padding = 1.0;\nexport var Reader = Evented.extend({\n  options: {\n    regions: [\n      'header',\n      'toolbar.top',\n      'toolbar.left',\n      'main',\n      'toolbar.right',\n      'toolbar.bottom',\n      'footer'\n    ],\n    flow: 'auto',\n    engine: 'epubjs',\n    trackResize: true\n  },\n\n  initialize: function(id, options) {\n    var self = this\n\n    options = Util.setOptions(this, options);\n\n    this._initContainer(id);\n    this._initLayout();\n\n    // hack for https://github.com/Leaflet/Leaflet/issues/1980\n    this._onResize = Util.bind(this._onResize, this);\n\n    this._initEvents();\n\n    this.callInitHooks();\n\n    this._mode = this.options.mode;\n  },\n\n  start: function(target) {\n    var self = this;\n    var panes = self._panes;\n\n    self.setBookPanelSize();\n\n    var x = panes['book-cover']; var xx = panes['book'];\n\n    this.open();\n\n    this.draw(target || 0);\n    this._loaded = true;\n  },\n\n  switch: function(flow, target) {\n    var target = target || this.currentLocation();\n    console.log(\"AHOY SWITCH\", target.start);\n    if ( flow === undefined ) {\n      flow = ( this.options.flow == 'auto' ) ? 'scrolled-doc' : 'auto';\n    }\n    this.options.flow = flow;\n    this.destroy();\n    this.draw(target);\n  },\n\n  draw: function(target) {\n    // NOOP\n  },\n\n  next: function() {\n    // NOOP\n  },\n\n  prev: function() {\n    // NOOP\n  },\n\n  display: function(index) {\n    // NOOP\n  },\n\n  gotoPage: function(target) {\n    // NOOP\n  },\n\n  _initContainer: function (id) {\n    var container = this._container = DomUtil.get(id);\n\n    if (!container) {\n      throw new Error('Reader container not found.');\n    } else if (container._cozy_id) {\n      throw new Error('Reader container is already initialized.');\n    }\n\n    DomEvent.on(container, 'scroll', this._onScroll, this);\n    this._containerId = Util.stamp(container);\n  },\n\n  _initLayout: function () {\n    var container = this._container;\n\n    this._fadeAnimated = this.options.fadeAnimation && Browser.any3d;\n\n    DomUtil.addClass(container, 'cozy-container' +\n      (Browser.touch ? ' cozy-touch' : '') +\n      (Browser.retina ? ' cozy-retina' : '') +\n      (Browser.ielt9 ? ' cozy-oldie' : '') +\n      (Browser.safari ? ' cozy-safari' : '') +\n      (this._fadeAnimated ? ' cozy-fade-anim' : ''));\n\n    var position = DomUtil.getStyle(container, 'position');\n\n    if (position !== 'absolute' && position !== 'relative' && position !== 'fixed') {\n      container.style.position = 'relative';\n    }\n\n    this._initPanes();\n\n    // if (this._initControlPos) {\n    //   this._initControlPos();\n    // }\n  },\n\n  _initPanes: function () {\n    var self = this;\n\n    var panes = this._panes = {};\n\n    var l = 'cozy-';\n    var container = this._container;\n\n    var prefix = 'cozy-module-';\n\n    DomUtil.addClass(container, 'cozy-container');\n    panes['top'] = DomUtil.create('div', prefix + 'top', container);\n    panes['main'] = DomUtil.create('div', prefix + 'main', container);\n    panes['bottom'] = DomUtil.create('div', prefix + 'bottom', container);\n\n    panes['left'] = DomUtil.create('div', prefix + 'left', panes['main']);\n    panes['book-cover'] = DomUtil.create('div', prefix + 'book-cover', panes['main']);\n    panes['right'] = DomUtil.create('div', prefix + 'right', panes['main']);\n    panes['book'] = DomUtil.create('div', prefix + 'book', panes['book-cover']);\n  },\n\n  _checkIfLoaded: function () {\n    if (!this._loaded) {\n      throw new Error('Set map center and zoom first.');\n    }\n  },\n\n  // DOM event handling\n\n  // @section Interaction events\n  _initEvents: function (remove) {\n    this._targets = {};\n    this._targets[Util.stamp(this._container)] = this;\n\n    var onOff = remove ? DomEvent.off : DomEvent.on;\n\n    // @event click: MouseEvent\n    // Fired when the user clicks (or taps) the map.\n    // @event dblclick: MouseEvent\n    // Fired when the user double-clicks (or double-taps) the map.\n    // @event mousedown: MouseEvent\n    // Fired when the user pushes the mouse button on the map.\n    // @event mouseup: MouseEvent\n    // Fired when the user releases the mouse button on the map.\n    // @event mouseover: MouseEvent\n    // Fired when the mouse enters the map.\n    // @event mouseout: MouseEvent\n    // Fired when the mouse leaves the map.\n    // @event mousemove: MouseEvent\n    // Fired while the mouse moves over the map.\n    // @event contextmenu: MouseEvent\n    // Fired when the user pushes the right mouse button on the map, prevents\n    // default browser context menu from showing if there are listeners on\n    // this event. Also fired on mobile when the user holds a single touch\n    // for a second (also called long press).\n    // @event keypress: KeyboardEvent\n    // Fired when the user presses a key from the keyboard while the map is focused.\n    // onOff(this._container, 'click dblclick mousedown mouseup ' +\n    //   'mouseover mouseout mousemove contextmenu keypress', this._handleDOMEvent, this);\n\n    if (this.options.trackResize) {\n      onOff(window, 'resize', this._onResize, this);\n    }\n\n    if (Browser.any3d && this.options.transform3DLimit) {\n      (remove ? this.off : this.on).call(this, 'moveend', this._onMoveEnd);\n    }\n  },\n\n  // _onResize: function () {\n  //   Util.cancelAnimFrame(this._resizeRequest);\n  //   this._resizeRequest = Util.requestAnimFrame(\n  //           function () { this.invalidateSize({debounceMoveend: true}); }, this);\n  // },\n\n  _onResize: function() {\n    if ( ! this._resizeRequest ) {\n      this._resizeRequest = Util.requestAnimFrame(function() {\n        this.invalidateSize({})\n      }, this);\n    }\n  },\n\n  _onScroll: function () {\n    this._container.scrollTop  = 0;\n    this._container.scrollLeft = 0;\n  },\n\n  _handleDOMEvent: function (e) {\n    if (!this._loaded || DomEvent.skipped(e)) { return; }\n\n    var type = e.type === 'keypress' && e.keyCode === 13 ? 'click' : e.type;\n\n    if (type === 'mousedown') {\n      // prevents outline when clicking on keyboard-focusable element\n      DomUtil.preventOutline(e.target || e.srcElement);\n    }\n\n    this._fireDOMEvent(e, type);\n  },\n\n  _fireDOMEvent: function (e, type, targets) {\n\n    if (e.type === 'click') {\n      // Fire a synthetic 'preclick' event which propagates up (mainly for closing popups).\n      // @event preclick: MouseEvent\n      // Fired before mouse click on the map (sometimes useful when you\n      // want something to happen on click before any existing click\n      // handlers start running).\n      var synth = Util.extend({}, e);\n      synth.type = 'preclick';\n      this._fireDOMEvent(synth, synth.type, targets);\n    }\n\n    if (e._stopped) { return; }\n\n    // Find the layer the event is propagating from and its parents.\n    targets = (targets || []).concat(this._findEventTargets(e, type));\n\n    if (!targets.length) { return; }\n\n    var target = targets[0];\n    if (type === 'contextmenu' && target.listens(type, true)) {\n      DomEvent.preventDefault(e);\n    }\n\n    var data = {\n      originalEvent: e\n    };\n\n    if (e.type !== 'keypress') {\n      var isMarker = (target.options && 'icon' in target.options);\n      data.containerPoint = isMarker ?\n          this.latLngToContainerPoint(target.getLatLng()) : this.mouseEventToContainerPoint(e);\n      data.layerPoint = this.containerPointToLayerPoint(data.containerPoint);\n      data.latlng = isMarker ? target.getLatLng() : this.layerPointToLatLng(data.layerPoint);\n    }\n\n    for (var i = 0; i < targets.length; i++) {\n      targets[i].fire(type, data, true);\n      if (data.originalEvent._stopped ||\n        (targets[i].options.nonBubblingEvents && Util.indexOf(targets[i].options.nonBubblingEvents, type) !== -1)) { return; }\n    }\n  },\n\n  setBookPanelSize: function() {\n    var panes = this._panes;\n\n    panes['book'].style.height = (panes['book-cover'].offsetHeight * _padding) + 'px';\n    panes['book'].style.width = (panes['book-cover'].offsetWidth * _padding) + 'px';\n    panes['book'].style.display = 'block';\n  },\n\n  invalidateSize: function(options) {\n    var self = this;\n\n    Util.cancelAnimFrame(this._resizeRequest);\n    this._resizeRequest = null;\n\n    if (! this._loaded) { return this; }\n\n\n    var target = this.currentLocation();\n\n    var panes = this._panes;\n    panes['book'].style.display = 'none';\n\n    setTimeout(function() {\n      self.setBookPanelSize();\n\n      if ( self._triggerRedraw ) {\n        clearTimeout(self._triggerRedraw);\n      }\n\n      self._triggerRedraw = setTimeout(function() {\n        self.destroy();\n        self.draw(target);\n      }, 150);\n\n\n    }, 0);\n    \n\n\n  },\n\n  EOT: true\n});\n\nexport function createReader(id, options) {\n  return new Reader(id, options);\n}\n","import {Class} from '../core/Class';\nimport {Reader} from '../reader/Reader';\nimport * as Util from '../core/Util';\nimport * as DomUtil from '../dom/DomUtil';\n\n/*\n * @class Control\n * @aka L.Control\n * @inherits Class\n *\n * L.Control is a base class for implementing reader controls. Handles regioning.\n * All other controls extend from this class.\n */\n\nexport var Control = Class.extend({\n    // @section\n    // @aka Control options\n    options: {\n        // @option region: String = 'topright'\n        // The region of the control (one of the reader corners). Possible values are `'topleft'`,\n        // `'topright'`, `'bottomleft'` or `'bottomright'`\n    },\n\n    initialize: function (options) {\n        Util.setOptions(this, options);\n        if ( options.container ) {\n            this._container = options.container;\n            this._locked = true;\n        }\n    },\n\n    /* @section\n     * Classes extending L.Control will inherit the following methods:\n     *\n     * @method getRegion: string\n     * Returns the region of the control.\n     */\n    getRegion: function () {\n        return this.options.region;\n    },\n\n    // @method setRegion(region: string): this\n    // Sets the region of the control.\n    setRegion: function (region) {\n        var reader = this._reader;\n\n        if (reader) {\n            reader.removeControl(this);\n        }\n\n        this.options.region = region;\n\n        if (reader) {\n            reader.addControl(this);\n        }\n\n        return this;\n    },\n\n    // @method getContainer: HTMLElement\n    // Returns the HTMLElement that contains the control.\n    getContainer: function () {\n        return this._container;\n    },\n\n    // @method addTo(reader: Map): this\n    // Adds the control to the given reader.\n    addTo: function (reader) {\n        this.remove();\n        this._reader = reader;\n\n        var container = this._container = this.onAdd(reader);\n\n        DomUtil.addClass(container, 'cozy-control');\n\n        if ( ! this._locked ) {\n            var region = this.getRegion();\n            var area = reader.getControlRegion(region);\n            area.appendChild(container);\n        }\n\n        return this;\n    },\n\n    // @method remove: this\n    // Removes the control from the reader it is currently active on.\n    remove: function () {\n        if (!this._reader) {\n            return this;\n        }\n\n        if (! this._container) {\n            return this;\n        }\n\nconsole.log(\"AHOY REMOVE\", this._locked);\n        if ( ! this._locked ) {\n            DomUtil.remove(this._container);\n        }\n\n        if (this.onRemove) {\n            this.onRemove(this._reader);\n        }\n\n        this._reader = null;\n\n        return this;\n    },\n\n    _refocusOnMap: function (e) {\n        // if reader exists and event is not a keyboard event\n        if (this._reader && e && e.screenX > 0 && e.screenY > 0) {\n            this._reader.getContainer().focus();\n        }\n    },\n\n    _className: function(widget) {\n        var className = [ 'cozy-control' ];\n        if ( this.options.direction ) {\n            className.push('cozy-control-' + this.options.direction);\n        }\n        if ( widget ) {\n            className.push('cozy-control-' + widget);\n        }\n        return className.join(' ');\n    }\n});\n\nexport var control = function (options) {\n    return new Control(options);\n};\n\n/* @section Extension methods\n * @uninheritable\n *\n * Every control should extend from `L.Control` and (re-)implement the following methods.\n *\n * @method onAdd(reader: Map): HTMLElement\n * Should return the container DOM element for the control and add listeners on relevant reader events. Called on [`control.addTo(reader)`](#control-addTo).\n *\n * @method onRemove(reader: Map)\n * Optional method. Should contain all clean up code that removes the listeners previously added in [`onAdd`](#control-onadd). Called on [`control.remove()`](#control-remove).\n */\n\n/* @namespace Map\n * @section Methods for Layers and Controls\n */\nReader.include({\n    // @method addControl(control: Control): this\n    // Adds the given control to the reader\n    addControl: function (control) {\n        control.addTo(this);\n        return this;\n    },\n\n    // @method removeControl(control: Control): this\n    // Removes the given control from the reader\n    removeControl: function (control) {\n        control.remove();\n        return this;\n    },\n\n    getControlContainer: function() {\n        var l = 'cozy-';\n        if ( ! this._controlContainer ) {\n            this._controlContainer =\n                DomUtil.create('div', l + 'control-container', this._container);\n        }\n        return this._controlContainer;\n    },\n\n    getControlRegion: function (target) {\n\n        if ( ! this._panes[target] ) {\n            // target is dot-delimited string\n            // first dot is the panel\n            var parts = target.split('.');\n            var tmp = [];\n            var parent = this._container;\n            var x = 0;\n            while ( parts.length ) {\n                var slug = parts.shift();\n                tmp.push(slug);\n                var panel = tmp.join(\".\");\n                var className = 'cozy-panel-' + slug;\n                if ( ! this._panes[panel] ) {\n                    this._panes[panel] = DomUtil.create('div', className, parent);\n                }\n                parent = this._panes[panel];\n                x += 1;\n                if ( x > 100 ) { break; }\n            }\n        }\n        return this._panes[target];\n    },\n\n    getControlRegion_1: function (target) {\n\n        var tmp = target.split('.');\n        var region = tmp.shift();\n        var slot = tmp.pop() || '-slot';\n\n        var container = this._panes[region];\n        if ( ! this._panes[target] ) {\n            var className = 'cozy-' + region + '--item cozy-slot-' + slot\n            if ( ! this._panes[region + '.' + slot] ) {\n                var div = DomUtil.create('div', className);\n                if ( slot == 'left' || slot == 'bottom' ) {\n                    var childElement = this._panes[region].firstChild;\n                    this._panes[region].insertBefore(div, childElement);\n                } else {\n                    this._panes[region].appendChild(div);\n                }\n                this._panes[region + '.' + slot] = div;\n            }\n            className = this._classify(tmp);\n            this._panes[target] = DomUtil.create('div', className, this._panes[region + '.' + slot]);\n        }\n\n        return this._panes[target];\n    },\n\n    _classify: function(tmp) {\n        var l = 'cozy-';\n        var className = [];\n        for(var i in tmp) {\n            className.push(l + tmp[i]);\n        }\n        className = className.join(' ');\n        return className;\n    },\n\n    _clearControlRegion: function () {\n        for (var i in this._controlRegions) {\n            DomUtil.remove(this._controlRegions[i]);\n        }\n        DomUtil.remove(this._controlContainer);\n        delete this._controlRegions;\n        delete this._controlContainer;\n    }\n});\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nvar PageControl = Control.extend({\n  onAdd: function(reader) {\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n      container = DomUtil.create('div', className),\n\n      this._control  = this._createButton(options.html || options.label, options.label,\n              className, container);\n    }\n    this._bindEvents();\n\n    return container;\n  },\n\n  _createButton: function (html, title, className, container) {\n    var link = DomUtil.create('a', className, container);\n    link.innerHTML = html;\n    link.href = '#';\n    link.title = title;\n\n    /*\n     * Will force screen readers like VoiceOver to read this as \"Zoom in - button\"\n     */\n    link.setAttribute('role', 'button');\n    link.setAttribute('aria-label', title);\n\n    return link;\n  },\n\n  _bindEvents: function() {\n    DomEvent.disableClickPropagation(this._control);\n    DomEvent.on(this._control, 'click', DomEvent.stop);\n    DomEvent.on(this._control, 'click', this._action, this);\n  },\n\n  EOT: true\n});\n\nexport var PagePrevious = PageControl.extend({\n  options: {\n    region: 'edge.left',\n    direction: 'previous',\n    label: 'Previous Page',\n    html: '<i class=\"icon-chevron-left oi\" data-glyph=\"chevron-left\" title=\"Previous Page\" aria-hidden=\"true\"></i>'\n  },\n\n  _action: function(e) {\n    this._reader.prev();\n  }\n});\n\nexport var PageNext = PageControl.extend({\n  options: {\n    region: 'edge.right',\n    direction: 'next',\n    label: 'Next Page',\n    html: '<i class=\"icon-chevron-right oi\" data-glyph=\"chevron-right\" title=\"Next Page\" aria-hidden=\"true\"></i>'\n  },\n\n  _action: function(e) {\n    this._reader.next();\n  }\n});\n\nexport var PageFirst = PageControl.extend({\n  options: {\n    direction: 'first',\n    label: 'First Page'\n  },\n  _action: function(e) {\n      this._reader.first();\n  }\n});\n\nexport var PageLast = PageControl.extend({\n  options: {\n    direction: 'last',\n    label: 'Last Page'\n  },\n  _action: function(e) {\n      this._reader.last();\n  }\n});\n\nexport var pageNext = function(options) {\n  return new PageNext(options);\n}\n\nexport var pagePrevious = function(options) {\n  return new PagePrevious(options);\n}\n\nexport var pageFirst = function(options) {\n  return new PageFirst(options);\n}\n\nexport var pageLast = function(options) {\n  return new PageLast(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Contents = Control.extend({\n\n  defaultTemplate: `<button class=\"button--sm\" data-toggle=\"dropdown\"><i class=\"icon-menu oi\" data-glyph=\"menu\" title=\"Table of Contents\" aria-hidden=\"true\"></i>  Contents</button><ul class=\"cozy-dropdown-menu\" data-target=\"menu\"></ul>`,\n\n  onAdd: function(reader) {\n    var self = this;\n\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._control = container.querySelector(\"[data-toggle=dropdown]\");\n    this._menu = container.querySelector(\"[data-target=menu]\");\n    this._menu.style.display = 'none';\n    container.style.position = 'relative';\n\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n      this._menu.style.display = 'block';\n    }, this)\n\n    DomEvent.on(this._menu, 'click', function(event) {\n      event.preventDefault();\n      var target = event.target;\n      target = target.getAttribute('href');\n      this._reader.gotoPage(target);\n      this._menu.style.display = 'none';\n    }, this);\n\n    this._reader.on('update-contents', function(data) {\n      var s = data.toc.filter(function(value) { return value.parent == null }).map(function(value) { return [ value, 0, self._menu ] });\n      while ( s.length ) {\n        var tuple = s.shift();\n        var chapter = tuple[0];\n        var tabindex = tuple[1];\n        var parent = tuple[2];\n\n        var option = self._createOption(chapter, tabindex, parent);\n        data.toc.filter(function(value) { return value.parent == chapter.id }).reverse().forEach(function(chapter_) {\n          s.unshift([chapter_, tabindex + 1, option]);\n        });\n      }\n    })\n\n    return container;\n  },\n\n  _createOption(chapter, tabindex, parent) {\n\n    function pad(value, length) {\n        return (value.toString().length < length) ? pad(\"-\"+value, length):value;\n    }\n    var option = DomUtil.create('li');\n    var anchor = DomUtil.create('a', null, option);\n    anchor.textContent = chapter.label;\n    // var tab = pad('', tabindex); tab = tab.length ? tab + ' ' : '';\n    // option.textContent = tab + chapter.label;\n    anchor.setAttribute('href', chapter.href);\n\n    if ( parent.tagName == 'LI' ) {\n      // need to nest\n      var tmp = parent.querySelector('ul');\n      if ( ! tmp ) {\n        tmp = DomUtil.create('ul', null, parent);\n      }\n      parent = tmp;\n    }\n\n    parent.appendChild(option);\n    return option;\n  },\n\n  EOT: true\n});\n\nexport var contents = function(options) {\n  return new Contents(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\n// Title + Chapter\n\nexport var Title = Control.extend({\n  onAdd: function(reader) {\n    var self = this;\n    var className = this._className(),\n        container = DomUtil.create('div', className),\n        options = this.options;\n\n    // var template = '<h1><span class=\"cozy-title\">Contents: </span><select size=\"1\" name=\"contents\"></select></label>';\n    // var control = new DOMParser().parseFromString(template, \"text/html\").body.firstChild;\n\n    var h1 = DomUtil.create('h1', 'cozy-h1', container);\n    this._title = DomUtil.create('span', 'cozy-title', h1);\n    this._divider = DomUtil.create('span', 'cozy-divider', h1);\n    this._divider.textContent = \" / \";\n    this._section = DomUtil.create('span', 'cozy-section', h1);\n\n    this._reader.on('update-section', function(data) {\n      console.log(\"AHOY UPDATE SECTION\", data, arguments);\n      if ( data && data.label ) {\n        self._section.textContent = data.label;\n        DomUtil.setOpacity(self._section, 1.0);\n        DomUtil.setOpacity(self._divider, 1.0);\n      } else {\n        DomUtil.setOpacity(self._section, 0);\n        DomUtil.setOpacity(self._divider, 0);\n      }\n    })\n\n    this._reader.on('update-title', function(data) {\n      console.log(\"UPDATE TITLE\", data);\n      if ( data ) {\n        self._title.textContent = data.title;\n        DomUtil.setOpacity(self._section, 0);\n        DomUtil.setOpacity(self._divider, 0);\n      }\n    })\n\n    return container;\n  },\n\n  _createButton: function (html, title, className, container, fn) {\n    var link = DomUtil.create('a', className, container);\n    link.innerHTML = html;\n    link.href = '#';\n    link.title = title;\n\n    /*\n     * Will force screen readers like VoiceOver to read this as \"Zoom in - button\"\n     */\n    link.setAttribute('role', 'button');\n    link.setAttribute('aria-label', title);\n\n    DomEvent.disableClickPropagation(link);\n    DomEvent.on(link, 'click', DomEvent.stop);\n    DomEvent.on(link, 'click', fn, this);\n    // DomEvent.on(link, 'click', this._refocusOnMap, this);\n\n    return link;\n  },\n\n  EOT: true\n});\n\nexport var title = function(options) {\n  return new Title(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\n// Title + Chapter\n\nexport var PublicationMetadata = Control.extend({\n  onAdd: function(reader) {\n    var self = this;\n    var className = this._className(),\n        container = DomUtil.create('div', className),\n        options = this.options;\n\n    // var template = '<h1><span class=\"cozy-title\">Contents: </span><select size=\"1\" name=\"contents\"></select></label>';\n    // var control = new DOMParser().parseFromString(template, \"text/html\").body.firstChild;\n\n    this._publisher = DomUtil.create('div', 'cozy-publisher', container);\n    this._rights = DomUtil.create('div', 'cozy-rights', container);\n\n    this._reader.on('update-title', function(data) {\n      if ( data ) {\n        self._publisher.textContent = data.publisher;\n        self._rights.textContent = data.rights;\n      }\n    })\n\n    return container;\n  },\n\n  _createButton: function (html, title, className, container, fn) {\n    var link = DomUtil.create('a', className, container);\n    link.innerHTML = html;\n    link.href = '#';\n    link.title = title;\n\n    /*\n     * Will force screen readers like VoiceOver to read this as \"Zoom in - button\"\n     */\n    link.setAttribute('role', 'button');\n    link.setAttribute('aria-label', title);\n\n    DomEvent.disableClickPropagation(link);\n    DomEvent.on(link, 'click', DomEvent.stop);\n    DomEvent.on(link, 'click', fn, this);\n    // DomEvent.on(link, 'click', this._refocusOnMap, this);\n\n    return link;\n  },\n\n  EOT: true\n});\n\nexport var publicationMetadata = function(options) {\n  return new PublicationMetadata(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Preferences = Control.extend({\n  options: {\n    label: 'Preferences',\n    html: '<i class=\"icon-cog oi\" data-glyph=\"cog\" title=\"Preferences and Settings\" aria-hidden=\"true\"></i>'\n  },\n\n  onAdd: function(reader) {\n    var self = this;\n    var className = this._className('preferences'),\n        container = DomUtil.create('div', className),\n        options = this.options;\n\n    this._activated = false;\n    this._control = this._createButton(options.html || options.label, options.label,\n            className, container, this._action)\n\n    this._createPanel();\n\n    return container;\n  },\n\n  _action: function() {\n    this._panel.style.display = 'block';\n  },\n\n  _createButton: function (html, title, className, container, fn) {\n    var link = DomUtil.create('button', className, container);\n    link.innerHTML = html;\n    link.title = title;\n\n    /*\n     * Will force screen readers like VoiceOver to read this as \"Zoom in - button\"\n     */\n    link.setAttribute('role', 'button');\n    link.setAttribute('aria-label', title);\n\n    DomEvent.disableClickPropagation(link);\n    DomEvent.on(link, 'click', DomEvent.stop);\n    DomEvent.on(link, 'click', fn, this);\n\n    return link;\n  },\n\n  _createPanel: function() {\n    var template = `<div class=\"cozy-modal cozy-preferences-modal\" style=\"position: fixed; width: 300px; margin-left: -150px; left: 50%; top: 50%; transform: translateY(-50%); z-index: 9000; display: none\">\n      <header>\n        <h2>Preferences</h2>\n      </header>\n      <article>\n        <form>\n          <fieldset>\n            <legend>Text Display</legend>\n            <label><input name=\"flow\" type=\"radio\" id=\"preferences-input-reflowable\" value=\"auto\" />Page-by-Page</label>\n            <label><input name=\"flow\" type=\"radio\" id=\"preferences-input-scrollable\" value=\"scrolled-doc\" />Scroll</label>\n          </fieldset>\n        </form>\n      </article>\n      <footer>\n      </footer>\n    </div>`;\n    this._panel = new DOMParser().parseFromString(template, \"text/html\").body.firstChild;\n    this._reader._container.appendChild(this._panel);\n\n    var input_id = \"preferences-input-\" + ( this._reader.options.flow == 'scrollable' ? 'scrollable' : 'reflowable' );\n    var input = this._panel.querySelector(\"#\" + input_id);\n    input.checked = true;\n\n    var footer = this._panel.querySelector(\"footer\");\n    this._cancelButton = this._createButton('<i class=\"icon-x oi\" data-glyph=\"x\" aria-hidden=\"true\"></i>', 'Close preferences without saving', 'close', footer, this._cancelAction);\n    this._saveButton = this._createButton('Save', 'Save Preferences', 'button--sm', footer, this._saveAction);\n  },\n\n  _cancelAction: function() {\n    this._panel.style.display = 'none';\n  },\n\n  _saveAction: function() {\n    var input = this._panel.querySelector(\"input[type=radio]:checked\");\n    var flow = input.value;\n    this._panel.style.display = 'none';\n    this._reader.switch(flow);\n  },\n\n  EOT: true\n});\n\nexport var preferences = function(options) {\n  return new Preferences(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Widget = Control.extend({\n\n  defaultTemplate: `<button data-toggle=\"button\" data-slot=\"title\"></button>`,\n\n  options: {\n      // @option region: String = 'topright'\n      // The region of the control (one of the reader corners). Possible values are `'topleft'`,\n      // `'topright'`, `'bottomleft'` or `'bottomright'`\n  },\n\n  onAdd: function(reader) {\n    var container = this._container;\n    if ( container ) {\n      // NOOP\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n\n      this.state(this.options.states[0].stateName, container);\n\n    }\n\n    this._bindEvents(container);\n\n    return container;\n  },\n\n  state: function(stateName, container) {\n    container = container || this._container;\n    this._resetState();\n    this._state = this.options.states.filter(function(s) { return s.stateName == stateName })[0];\n    if ( this._state.className ) {\n      DomUtil.addClass(container, this._state.className);\n    }\n    if ( this._state.title ) {\n      var element = container.querySelector(\"[data-slot=title]\");\n      element.innerHTML = this._state.title;\n      element.setAttribute('value', this._state.title);\n    }\n  },\n\n  _resetState: function() {\n    if ( ! this._state ) { return; }\n    if ( this._state.className ) {\n      DomUtil.removeClass(this._container, this._state.className);\n    }\n  },\n\n  _bindEvents: function(container) {\n    var control = container.querySelector(\"[data-toggle=button]\");\n    if ( ! control ) { return ; }\n    DomEvent.disableClickPropagation(control);\n    DomEvent.on(control, 'click', DomEvent.stop);\n    DomEvent.on(control, 'click', this._action, this);\n  },\n\n  _action: function() {\n    this._state.onClick(this, this._reader);\n  },\n\n  EOT: true\n});\n\nexport var widget = function(options) {\n  return new Widget(options);\n}\n","import {Control, control} from './Control';\nimport {PageNext, PagePrevious, pageNext, pagePrevious, PageFirst, pageFirst, PageLast, pageLast} from './Control.Paging';\nimport {Contents, contents} from './Control.Contents';\nimport {Title, title} from './Control.Title';\nimport {PublicationMetadata, publicationMetadata} from './Control.PublicationMetadata';\nimport {Preferences, preferences} from './Control.Preferences';\nimport {Widget, widget} from './Control.Widget';\n\n// import {Zoom, zoom} from './Control.Zoom';\n// import {Attribution, attribution} from './Control.Attribution';\n\nControl.PageNext = PageNext;\nControl.PagePrevious = PagePrevious;\nControl.PageFirst = PageFirst;\nControl.PageLast = PageLast;\ncontrol.pagePrevious = pagePrevious;\ncontrol.pageNext = pageNext;\ncontrol.pageFirst = pageFirst;\ncontrol.pageLast = pageLast;\n\nControl.Contents = Contents;\ncontrol.contents = contents;\n\nControl.Title = Title;\ncontrol.title = title;\n\nControl.PublicationMetadata = PublicationMetadata;\ncontrol.publicationMetadata = publicationMetadata;\n\nControl.Preferences = Preferences;\ncontrol.preferences = preferences;\n\nControl.Widget = Widget;\ncontrol.widget = widget;\n\nexport {Control, control};\n","import {Evented} from './Events';\n\nvar Bus = Evented.extend({\n});\n\nvar instance;\nexport var bus = function() {\n  return instance || ( instance = new Bus() );\n}\n","import * as Browser from './Browser';\nexport {Browser};\n\nexport {Class} from './Class';\n\nimport {Evented} from './Events';\nexport {Evented};\nexport var Mixin = {Events: Evented.prototype};\n\nimport * as Util from './Util';\nexport {Util};\nexport {extend, bind, stamp, setOptions} from './Util';\nexport {bus} from './Bus';\n","\nvar ePub = window.ePub;\nexport {ePub};","import * as Util from '../core/Util';\nimport {Reader} from './Reader';\nimport * as epubjs from '../epubjs';\n\nReader.EpubJS = Reader.extend({\n\n  initialize: function(id, options) {\n    Reader.prototype.initialize.apply(this, arguments);\n  },\n\n  open: function() {\n    var self = this;\n    this._book = epubjs.ePub(this.options.href);\n    this._book.loaded.navigation.then(function(toc) {\n      self._contents = toc;\n      self.fire('update-contents', toc);\n      self.fire('update-title', self._book.package.metadata);\n    })\n  },\n\n  draw: function(target, callback) {\n    var self = this;\n    this.settings = { flow: this.options.flow };\n    this.settings.height = '100%';\n    // this.settings.width = '100%';\n    if ( this.options.flow == 'auto' ) {\n      this._panes['book'].style.overflow = 'hidden';\n    } else {\n      this._panes['book'].style.overflow = 'auto';\n    }\n    // have to set this to prevent scrolling issues\n    // this.settings.height = this._panes['book'].clientHeight;\n    // this.settings.width = this._panes['book'].clientWidth;\n\n    // start the rendition after all the epub parts \n    // have been loaded\n    this._book.ready.then(function() {\n      self._rendition = self._book.renderTo(self._panes['book'], self.settings);\n      self._bindEvents();\n\n      if ( target && target.start ) { target = target.start; }\n      self._rendition.display(target).then(function() {\n        if ( callback ) { callback(); }\n      });\n    })\n  },\n\n  next: function() {\n    this._rendition.next();\n  },\n\n  prev: function() {\n    this._rendition.prev();\n  },\n\n  first: function() {\n    this._rendition.display(0);\n  },\n\n  last: function() {\n    var self = this;\n    var target = this._book.spine.length - 1;\n    this._rendition.display(target);\n    return;\n\n    var target = 0.9999999;\n    var promise;\n    // epub.js looks for floats, but Javascript treats 100.0 === 100\n    if ( this._book.locations.total == 0 ) {\n      promise = this._book.locations.generate(); \n    } else {\n      promise = new Promise(function(fullfill){ fullfill()});\n    }\n    promise.then(function() { self._rendition.display(target); })\n  },\n\n  gotoPage: function(target) {\n    if ( typeof(target) == \"string\" && target.substr(0, 3) == '../' ) {\n      while ( target.substr(0, 3) == '../' ) {\n        target = target.substr(3);\n      }\n    }\n    this._rendition.display(target);\n  },\n\n  destroy: function() {\n    if ( this._rendition ) {\n      this._rendition.destroy();\n    }\n    this._rendition = null;\n  },\n\n  currentLocation: function() {\n    if ( this._rendition ) { \n      return this._rendition.currentLocation();\n    }\n    return null;\n  },\n\n  _bindEvents: function() {\n    var self = this;\n\n    // add a stylesheet to stop images from breaking their columns\n    var add_max_img_styles = false;\n    if ( this._book.package.metadata.layout == 'pre-paginated' ) {\n      // NOOP\n    } else if ( this.options.flow == 'auto' || this.options.flow == 'reflowable' ) {\n      add_max_img_styles = true;\n    }\n    if ( add_max_img_styles ) {\n      this._rendition.hooks.content.register(function(view) {\n        view.addStylesheetRules([ [ 'img', [ 'max-height', '100%' ], [ 'max-width', '100%'] ] ]);\n      })\n    }\n    this._rendition.on(\"locationChanged\", function(location) {\n      var view = this.manager.current();\n      var section = view.section;\n      var current = this.book.navigation.get(section.href);\n      self.fire(\"update-section\", current);\n    });\n  },\n\n  EOT: true\n\n})\n\nexport function createReader(id, options) {\n  return new Reader.EpubJS(id, options);\n}\n","import {Reader} from './Reader';\nimport * as EpubJS from './Reader.EpubJS';\n\nvar engines = {\n  epubjs: EpubJS.createReader\n}\n\nexport var reader = function(id, options) {\n  var engine = options.engine || 'epubjs';\n  return engines[engine].apply(this, arguments);\n}","\nimport {version} from '../package.json';\nexport {version};\n\n// control\nexport * from './control/index';\n\n// core\nexport * from './core/index';\n\n// dom\nexport * from './dom/index';\n\n// reader\nexport * from './reader/index';\n\n// misc\n\nvar oldCozy = window.cozy;\nexport function noConflict() {\n  window.cozy = oldCozy;\n  return this;\n}\n"],"names":["Util.create","Util.extend","Util.splitWords","Util.falseFn","Util.bind","Util.stamp","style","Browser.msPointer","DomEvent.preventDefault","Browser.pointer","touch","Browser.edge","Browser.touch","Browser.chrome","Browser.android","Browser.win","Browser.gecko","create","Util.trim","Browser.ie3d","Browser.any3d","DomEvent.on","DomEvent.off","Util.setOptions","DomUtil.get","DomUtil.addClass","Browser.retina","Browser.ielt9","Browser.safari","DomUtil.getStyle","DomUtil.create","remove","Util.requestAnimFrame","DomEvent.skipped","DomUtil.preventOutline","Util.indexOf","Util.cancelAnimFrame","DomUtil.remove","DomEvent.disableClickPropagation","DomEvent.stop","DomUtil.setOpacity","DomUtil.removeClass","control","epubjs.ePub","createReader","EpubJS.createReader"],"mappings":"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"}